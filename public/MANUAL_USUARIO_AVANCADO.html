<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual do Usu√°rio Avan√ßado - SentencifyAI v1.38.21</title>
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-green: #22c55e;
            --accent-amber: #f59e0b;
            --accent-red: #ef4444;
            --accent-cyan: #06b6d4;
            --border-color: #475569;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }

        .light-theme {
            --bg-primary: #f8fafc;
            --bg-secondary: #ffffff;
            --bg-tertiary: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #cbd5e1;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-blue));
            padding: 2rem;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .header .subtitle {
            opacity: 0.9;
            font-size: 1rem;
        }

        .header-controls {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 0.5rem;
        }

        .theme-toggle {
            background: rgba(255,255,255,0.2);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            background: rgba(255,255,255,0.3);
        }

        /* Main Layout */
        .main-container {
            display: flex;
            max-width: 1600px;
            margin: 0 auto;
            min-height: calc(100vh - 120px);
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 280px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 1.5rem 0;
            position: sticky;
            top: 120px;
            height: calc(100vh - 120px);
            overflow-y: auto;
        }

        .nav-section {
            margin-bottom: 1.5rem;
        }

        .nav-section-title {
            padding: 0.5rem 1.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-secondary);
            letter-spacing: 0.05em;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            color: var(--text-primary);
            text-decoration: none;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: var(--bg-tertiary);
        }

        .nav-item.active {
            background: var(--bg-tertiary);
            border-left-color: var(--accent-blue);
            color: var(--accent-blue);
        }

        .nav-icon {
            font-size: 1.25rem;
            width: 1.5rem;
            text-align: center;
        }

        /* Content Area */
        .content {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Section Styles */
        .section-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }

        .section-icon {
            font-size: 2.5rem;
        }

        .section-title {
            font-size: 1.75rem;
            font-weight: 700;
        }

        .section-subtitle {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* Cards */
        .card {
            background: var(--bg-secondary);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }

        .card-icon {
            font-size: 1.5rem;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        /* Feature Grid */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .feature-item {
            background: var(--bg-tertiary);
            padding: 1rem;
            border-radius: 0.75rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .feature-icon {
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .feature-text h4 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .feature-text p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            margin: 1rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        th, td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background: var(--bg-tertiary);
            font-weight: 600;
            color: var(--text-primary);
        }

        tr:hover {
            background: var(--bg-tertiary);
        }

        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge-blue { background: rgba(59, 130, 246, 0.2); color: var(--accent-blue); }
        .badge-purple { background: rgba(139, 92, 246, 0.2); color: var(--accent-purple); }
        .badge-green { background: rgba(34, 197, 94, 0.2); color: var(--accent-green); }
        .badge-amber { background: rgba(245, 158, 11, 0.2); color: var(--accent-amber); }
        .badge-red { background: rgba(239, 68, 68, 0.2); color: var(--accent-red); }
        .badge-cyan { background: rgba(6, 182, 212, 0.2); color: var(--accent-cyan); }

        /* Tips and Alerts */
        .tip-box {
            padding: 1rem 1.25rem;
            border-radius: 0.75rem;
            margin: 1rem 0;
            display: flex;
            gap: 0.75rem;
            align-items: flex-start;
        }

        .tip-box.info {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid var(--accent-blue);
        }

        .tip-box.success {
            background: rgba(34, 197, 94, 0.1);
            border-left: 4px solid var(--accent-green);
        }

        .tip-box.warning {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--accent-amber);
        }

        .tip-box.danger {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid var(--accent-red);
        }

        .tip-icon {
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        /* Steps */
        .steps {
            margin: 1.5rem 0;
        }

        .step {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px dashed var(--border-color);
        }

        .step:last-child {
            border-bottom: none;
        }

        .step-number {
            width: 2rem;
            height: 2rem;
            background: var(--accent-blue);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            flex-shrink: 0;
        }

        .step-content h4 {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .step-content p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Keyboard shortcuts */
        kbd {
            background: var(--bg-tertiary);
            padding: 0.2rem 0.5rem;
            border-radius: 0.25rem;
            font-family: monospace;
            font-size: 0.85rem;
            border: 1px solid var(--border-color);
        }

        /* Collapsible sections */
        .collapsible {
            margin: 1rem 0;
        }

        .collapsible-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .collapsible-header:hover {
            background: var(--border-color);
        }

        .collapsible-header h3 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }

        .collapsible-arrow {
            transition: transform 0.3s;
        }

        .collapsible.open .collapsible-arrow {
            transform: rotate(180deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .collapsible.open .collapsible-content {
            max-height: 5000px;
        }

        .collapsible-inner {
            padding: 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 0.5rem 0.5rem;
        }

        /* Flow Diagram */
        .flow-diagram {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            align-items: center;
            justify-content: center;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: var(--bg-tertiary);
            border-radius: 1rem;
        }

        .flow-step {
            background: var(--bg-secondary);
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            text-align: center;
            min-width: 120px;
        }

        .flow-step-icon {
            font-size: 1.5rem;
            display: block;
            margin-bottom: 0.25rem;
        }

        .flow-arrow {
            color: var(--accent-blue);
            font-size: 1.5rem;
        }

        /* Search highlight */
        .highlight {
            background: rgba(245, 158, 11, 0.3);
            padding: 0.1rem 0.25rem;
            border-radius: 0.25rem;
        }

        /* Code blocks */
        code {
            background: var(--bg-tertiary);
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
        }

        pre {
            background: var(--bg-tertiary);
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
            line-height: 1.5;
            margin: 1rem 0;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                display: none;
            }
            .main-container {
                flex-direction: column;
            }
            .header h1 {
                font-size: 1.5rem;
            }
        }

        /* Mobile navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            padding: 0.5rem;
            z-index: 100;
            overflow-x: auto;
        }

        @media (max-width: 1024px) {
            .mobile-nav {
                display: flex;
                gap: 0.25rem;
            }
            .content {
                padding-bottom: 5rem;
            }
        }

        .mobile-nav-item {
            flex: 0 0 auto;
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            text-align: center;
            cursor: pointer;
            background: transparent;
            color: var(--text-secondary);
            border: none;
            transition: all 0.2s;
        }

        .mobile-nav-item.active {
            background: var(--accent-blue);
            color: white;
        }

        .mobile-nav-item span {
            display: block;
            font-size: 1.25rem;
        }

        /* Quick reference */
        .quick-ref {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .quick-ref-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            background: var(--bg-tertiary);
            border-radius: 0.5rem;
            font-size: 0.85rem;
        }

        /* Progress indicator */
        .progress-bar {
            height: 4px;
            background: var(--bg-tertiary);
            border-radius: 2px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple));
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>üìö Manual do Usu√°rio Avan√ßado</h1>
        <p class="subtitle">SentencifyAI v1.38.21 ‚Äî Guia Completo de Funcionalidades</p>
        <div class="header-controls">
            <button class="theme-toggle" onclick="toggleTheme()" title="Alternar tema">üåì</button>
        </div>
    </header>

    <div class="main-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="nav-section">
                <div class="nav-section-title">Introdu√ß√£o</div>
                <div class="nav-item active" onclick="showTab('intro')">
                    <span class="nav-icon">üè†</span>
                    <span>Vis√£o Geral</span>
                </div>
                <div class="nav-item" onclick="showTab('workflow')">
                    <span class="nav-icon">üîÑ</span>
                    <span>Fluxo de Trabalho</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Abas do Sistema</div>
                <div class="nav-item" onclick="showTab('upload')">
                    <span class="nav-icon">üì§</span>
                    <span>Upload & An√°lise</span>
                </div>
                <div class="nav-item" onclick="showTab('topicos')">
                    <span class="nav-icon">üìã</span>
                    <span>T√≥picos</span>
                </div>
                <div class="nav-item" onclick="showTab('provas')">
                    <span class="nav-icon">‚öñÔ∏è</span>
                    <span>Provas</span>
                </div>
                <div class="nav-item" onclick="showTab('editor')">
                    <span class="nav-icon">‚úèÔ∏è</span>
                    <span>Editor</span>
                </div>
                <div class="nav-item" onclick="showTab('juris')">
                    <span class="nav-icon">üìñ</span>
                    <span>Jurisprud√™ncia</span>
                </div>
                <div class="nav-item" onclick="showTab('legis')">
                    <span class="nav-icon">üìú</span>
                    <span>Legisla√ß√£o</span>
                </div>
                <div class="nav-item" onclick="showTab('modelos')">
                    <span class="nav-icon">üì¶</span>
                    <span>Modelos</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Configura√ß√µes</div>
                <div class="nav-item" onclick="showTab('config')">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Configura√ß√µes IA</span>
                </div>
                <div class="nav-item" onclick="showTab('atalhos')">
                    <span class="nav-icon">‚å®Ô∏è</span>
                    <span>Atalhos de Teclado</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-section-title">Avan√ßado</div>
                <div class="nav-item" onclick="showTab('ia-local')">
                    <span class="nav-icon">üß†</span>
                    <span>IA Local (Offline)</span>
                </div>
                <div class="nav-item" onclick="showTab('dicas')">
                    <span class="nav-icon">üí°</span>
                    <span>Dicas e Boas Pr√°ticas</span>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="content">

            <!-- Intro Tab -->
            <div id="intro" class="tab-content active">
                <div class="section-header">
                    <span class="section-icon">üè†</span>
                    <div>
                        <h2 class="section-title">Bem-vindo ao SentencifyAI</h2>
                        <p class="section-subtitle">Sistema de aux√≠lio √† reda√ß√£o de senten√ßas trabalhistas para magistrados brasileiros</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üéØ</span>
                        <h3 class="card-title">O que √© o SentencifyAI?</h3>
                    </div>
                    <p>O SentencifyAI √© uma ferramenta avan√ßada que roda 100% no navegador e auxilia ju√≠zes trabalhistas na reda√ß√£o de senten√ßas completas. Suporta <strong>4 provedores de IA</strong> (Claude, Gemini, OpenAI, Grok) e oferece recursos como extra√ß√£o autom√°tica de t√≥picos, assistente de chat, ditado por voz e verifica√ß√£o dupla.</p>

                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">üìÑ</span>
                            <div class="feature-text">
                                <h4>Extra√ß√£o Autom√°tica</h4>
                                <p>Analisa peti√ß√µes e contesta√ß√µes para extrair t√≥picos automaticamente</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">ü§ñ</span>
                            <div class="feature-text">
                                <h4>Assistente IA</h4>
                                <p>Chat interativo para auxiliar na reda√ß√£o e an√°lise de provas</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üìö</span>
                            <div class="feature-text">
                                <h4>Biblioteca de Modelos</h4>
                                <p>Reutilize fundamenta√ß√µes gen√©ricas com sugest√µes inteligentes</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üîí</span>
                            <div class="feature-text">
                                <h4>Anonimiza√ß√£o</h4>
                                <p>Remove dados sens√≠veis antes de enviar √† IA (100% local)</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üß†</span>
                            <div class="feature-text">
                                <h4>Busca Sem√¢ntica</h4>
                                <p>Encontre legisla√ß√£o e jurisprud√™ncia por significado, n√£o apenas palavras</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üìù</span>
                            <div class="feature-text">
                                <h4>Revis√£o Cr√≠tica</h4>
                                <p>IA analisa omiss√µes, contradi√ß√µes e obscuridades na senten√ßa</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üåê</span>
                            <div class="feature-text">
                                <h4>Multi-Provider</h4>
                                <p>Escolha entre Claude, Gemini, OpenAI ou Grok para cada tarefa</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üé§</span>
                            <div class="feature-text">
                                <h4>Ditado por Voz</h4>
                                <p>Dite textos usando microfone com melhoria autom√°tica por IA</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">‚úÖ</span>
                            <div class="feature-text">
                                <h4>Double Check</h4>
                                <p>Verifica√ß√£o secund√°ria das respostas por outro modelo de IA</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üóÇÔ∏è</span>
                        <h3 class="card-title">Estrutura do Sistema (7 Abas)</h3>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Aba</th>
                                    <th>√çcone</th>
                                    <th>Fun√ß√£o Principal</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Upload & An√°lise</strong></td>
                                    <td>üì§</td>
                                    <td>Carregar documentos (PDF/texto) e extrair t√≥picos</td>
                                </tr>
                                <tr>
                                    <td><strong>T√≥picos</strong></td>
                                    <td>üìã</td>
                                    <td>Gerenciar t√≥picos extra√≠dos (editar, mesclar, dividir, reordenar)</td>
                                </tr>
                                <tr>
                                    <td><strong>Provas</strong></td>
                                    <td>‚öñÔ∏è</td>
                                    <td>Upload de evid√™ncias e vincula√ß√£o aos t√≥picos</td>
                                </tr>
                                <tr>
                                    <td><strong>Editor</strong></td>
                                    <td>‚úèÔ∏è</td>
                                    <td>Redigir fundamenta√ß√£o com editor rico e sugest√µes de modelos</td>
                                </tr>
                                <tr>
                                    <td><strong>Jurisprud√™ncia</strong></td>
                                    <td>üìñ</td>
                                    <td>Buscar s√∫mulas, OJs, IRRs e precedentes (textual ou sem√¢ntica)</td>
                                </tr>
                                <tr>
                                    <td><strong>Legisla√ß√£o</strong></td>
                                    <td>üìú</td>
                                    <td>Buscar artigos de lei (CLT, CPC, CF/88, etc.)</td>
                                </tr>
                                <tr>
                                    <td><strong>Modelos</strong></td>
                                    <td>üì¶</td>
                                    <td>Biblioteca de templates reutiliz√°veis de fundamenta√ß√£o</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="tip-box info">
                    <span class="tip-icon">üí°</span>
                    <div>
                        <strong>Dica:</strong> Navegue por este manual usando o menu lateral. Cada aba do sistema tem sua pr√≥pria se√ß√£o detalhada com passo a passo completo.
                    </div>
                </div>
            </div>

            <!-- Workflow Tab -->
            <div id="workflow" class="tab-content">
                <div class="section-header">
                    <span class="section-icon">üîÑ</span>
                    <div>
                        <h2 class="section-title">Fluxo de Trabalho Completo</h2>
                        <p class="section-subtitle">Do upload dos documentos at√© a senten√ßa final</p>
                    </div>
                </div>

                <div class="flow-diagram">
                    <div class="flow-step">
                        <span class="flow-step-icon">üì§</span>
                        <div>1. Upload</div>
                    </div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-step">
                        <span class="flow-step-icon">üîç</span>
                        <div>2. An√°lise</div>
                    </div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-step">
                        <span class="flow-step-icon">üìã</span>
                        <div>3. T√≥picos</div>
                    </div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-step">
                        <span class="flow-step-icon">‚öñÔ∏è</span>
                        <div>4. Provas</div>
                    </div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-step">
                        <span class="flow-step-icon">‚úèÔ∏è</span>
                        <div>5. Edi√ß√£o</div>
                    </div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-step">
                        <span class="flow-step-icon">üìù</span>
                        <div>6. Dispositivo</div>
                    </div>
                    <span class="flow-arrow">‚Üí</span>
                    <div class="flow-step">
                        <span class="flow-step-icon">‚úÖ</span>
                        <div>7. Revis√£o</div>
                    </div>
                </div>

                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h4>Upload de Documentos</h4>
                            <p>Carregue a <strong>Peti√ß√£o Inicial</strong> (obrigat√≥ria) e a <strong>Contesta√ß√£o</strong> (recomendada). Pode adicionar documentos complementares opcionalmente. Escolha o modo de processamento: PDF.js (gratuito) ou Claude Vision (OCR avan√ßado).</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h4>Extra√ß√£o de T√≥picos</h4>
                            <p>Clique em <strong>"Analisar Documentos"</strong>. A IA extrai automaticamente os t√≥picos (pedidos) identificados nas pe√ßas, organizados por categoria: Preliminar, Prejudicial, M√©rito e Processual.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h4>Refinamento dos T√≥picos</h4>
                            <p>Na aba <strong>T√≥picos</strong>, revise a lista. Voc√™ pode: renomear, dividir t√≥picos muito amplos, mesclar t√≥picos relacionados, reordenar arrastando e alterar categorias.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h4>Upload e Vincula√ß√£o de Provas</h4>
                            <p>Na aba <strong>Provas</strong>, carregue evid√™ncias (PDFs ou texto). Vincule cada prova aos t√≥picos relacionados. Use <strong>"Analisar com IA"</strong> para obter an√°lise contextual ou livre.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <h4>Reda√ß√£o da Fundamenta√ß√£o</h4>
                            <p>Na aba <strong>Editor</strong>, clique em cada t√≥pico para redigir. Use o painel lateral com <strong>sugest√µes de modelos</strong>, consulte jurisprud√™ncia/legisla√ß√£o e use o <strong>Assistente IA</strong> para tirar d√∫vidas. Selecione o resultado (Procedente/Improcedente/Parcial).</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">6</div>
                        <div class="step-content">
                            <h4>Gera√ß√£o do Dispositivo</h4>
                            <p>Com todos os t√≥picos decididos, clique em <strong>"Gerar Dispositivo"</strong>. A IA cria o dispositivo estruturado baseado nos resultados selecionados (verbos em negrito, itens numerados).</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">7</div>
                        <div class="step-content">
                            <h4>Revis√£o Cr√≠tica</h4>
                            <p>Clique em <strong>"Revisar Senten√ßa"</strong>. A IA atua como "advogado do diabo", buscando omiss√µes, contradi√ß√µes e obscuridades que poderiam gerar embargos de declara√ß√£o. Com <strong>Double Check</strong> ativado, um segundo modelo verifica as corre√ß√µes sugeridas. Corrija e exporte a minuta final.</p>
                        </div>
                    </div>
                </div>

                <div class="tip-box success">
                    <span class="tip-icon">‚úÖ</span>
                    <div>
                        <strong>Pronto!</strong> Com a revis√£o conclu√≠da, exporte a senten√ßa em Word/PDF, salve em JSON local, ou use o <strong>Google Drive</strong> para backup na nuvem.
                    </div>
                </div>

                <!-- NOVO: Import/Export Projeto -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üíæ</span>
                        <h3 class="card-title">Importar / Exportar Projeto</h3>
                    </div>
                    <p>Salve e restaure seu trabalho completo a qualquer momento:</p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Opera√ß√£o</th>
                                    <th>O que Inclui</th>
                                    <th>Localiza√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Exportar Projeto</strong> üì§</td>
                                    <td>T√≥picos, Provas, Relat√≥rio, Dispositivo, Resultados, V√≠nculos, An√°lises, Chat</td>
                                    <td>Dropdown "Projeto" no header</td>
                                </tr>
                                <tr>
                                    <td><strong>Importar Projeto</strong> üì•</td>
                                    <td>Restaura estado completo do projeto de um JSON exportado</td>
                                    <td>Dropdown "Projeto" no header</td>
                                </tr>
                                <tr>
                                    <td><strong>Exportar Minuta</strong> üìÑ</td>
                                    <td>Relat√≥rio + Fundamenta√ß√£o + Dispositivo formatados (Word/HTML)</td>
                                    <td>Bot√£o "Exportar Minuta" na aba T√≥picos</td>
                                </tr>
                                <tr>
                                    <td><strong>Salvar no Drive</strong> ‚òÅÔ∏è</td>
                                    <td>Projeto completo no Google Drive (requer login)</td>
                                    <td>Bot√£o Google Drive no header (ap√≥s conectar)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tip-box warning">
                        <span class="tip-icon">‚ö†Ô∏è</span>
                        <div><strong>Importante:</strong> O JSON de projeto N√ÉO inclui os PDFs originais (apenas texto extra√≠do). Mantenha os arquivos originais arquivados.</div>
                    </div>
                </div>
            </div>

            <!-- Upload Tab -->
            <div id="upload" class="tab-content">
                <div class="section-header">
                    <span class="section-icon">üì§</span>
                    <div>
                        <h2 class="section-title">Upload & An√°lise</h2>
                        <p class="section-subtitle">Carregamento de documentos e extra√ß√£o de t√≥picos</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìÑ</span>
                        <h3 class="card-title">Documentos Suportados</h3>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Documento</th>
                                    <th>Obrigat√≥rio?</th>
                                    <th>Formatos</th>
                                    <th>Uso</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Peti√ß√£o Inicial</strong></td>
                                    <td><span class="badge badge-red">Sim</span></td>
                                    <td>PDF (at√© 10MB) ou texto colado</td>
                                    <td>Base para extra√ß√£o de t√≥picos</td>
                                </tr>
                                <tr>
                                    <td><strong>Contesta√ß√£o</strong></td>
                                    <td><span class="badge badge-amber">Recomendado</span></td>
                                    <td>PDF (at√© 10MB) ou texto colado</td>
                                    <td>Argumentos da defesa nos mini-relat√≥rios</td>
                                </tr>
                                <tr>
                                    <td><strong>Complementares</strong></td>
                                    <td><span class="badge badge-green">Opcional</span></td>
                                    <td>M√∫ltiplos PDFs ou textos</td>
                                    <td>Consulta pelo Assistente IA (n√£o usado nos relat√≥rios autom√°ticos)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚öôÔ∏è</span>
                        <h3 class="card-title">Modos de Processamento de PDF</h3>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üìù PDF.js (Recomendado)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p><strong>Como funciona:</strong> Extrai texto localmente no navegador</p>
                                <div class="quick-ref">
                                    <div class="quick-ref-item">‚úÖ Gratuito (sem custo de API)</div>
                                    <div class="quick-ref-item">‚úÖ R√°pido (instant√¢neo)</div>
                                    <div class="quick-ref-item">‚úÖ Permite anonimiza√ß√£o</div>
                                    <div class="quick-ref-item">‚ùå N√£o funciona com PDFs escaneados</div>
                                </div>
                                <p><strong>Ideal para:</strong> PDFs nativos (gerados de Word, sistemas, etc.)</p>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üëÅÔ∏è Claude Vision (OCR Avan√ßado)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p><strong>Como funciona:</strong> Envia p√°ginas como imagem para Claude analisar</p>
                                <div class="quick-ref">
                                    <div class="quick-ref-item">‚úÖ Funciona com qualquer PDF</div>
                                    <div class="quick-ref-item">‚úÖ L√™ PDFs escaneados</div>
                                    <div class="quick-ref-item">üí∞ ~$0.04 USD / 10 p√°ginas</div>
                                    <div class="quick-ref-item">‚è±Ô∏è ~3-8s por p√°gina</div>
                                </div>
                                <p><strong>Ideal para:</strong> PDFs escaneados, documentos com imagens</p>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üìÑ PDF Puro (Bin√°rio)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p><strong>Como funciona:</strong> Envia o PDF completo sem extra√ß√£o pr√©via</p>
                                <div class="quick-ref">
                                    <div class="quick-ref-item">‚úÖ Preserva 100% do documento</div>
                                    <div class="quick-ref-item">üí∞ Usa mais tokens</div>
                                    <div class="quick-ref-item">‚ùå N√£o permite anonimiza√ß√£o</div>
                                </div>
                                <p><strong>Ideal para:</strong> Documentos com formata√ß√£o complexa que precisa ser preservada</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚ñ∂Ô∏è</span>
                        <h3 class="card-title">Como Analisar Documentos</h3>
                    </div>
                    <div class="steps">
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Fa√ßa upload da Peti√ß√£o Inicial</h4>
                                <p>Arraste o PDF para a √°rea de upload ou clique para selecionar. Alternativamente, cole o texto diretamente.</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Adicione a Contesta√ß√£o (recomendado)</h4>
                                <p>O sistema gera mini-relat√≥rios melhores quando tem acesso aos argumentos da defesa.</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Escolha o modo de processamento</h4>
                                <p>Use PDF.js para PDFs nativos (gratuito e r√°pido). Use Claude Vision para escaneados.</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>Clique em "Analisar Documentos"</h4>
                                <p>A IA extrai os t√≥picos automaticamente. Se anonimiza√ß√£o estiver ativa, confirme os nomes antes.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tip-box warning">
                    <span class="tip-icon">‚ö†Ô∏è</span>
                    <div>
                        <strong>Anonimiza√ß√£o:</strong> Se ativada, s√≥ funciona com PDF.js. O sistema pedir√° para confirmar os nomes antes de enviar √† IA. Use "Detectar Nomes" para detec√ß√£o autom√°tica (requer modelo NER).
                    </div>
                </div>
            </div>

            <!-- Topicos Tab -->
            <div id="topicos" class="tab-content">
                <div class="section-header">
                    <span class="section-icon">üìã</span>
                    <div>
                        <h2 class="section-title">T√≥picos</h2>
                        <p class="section-subtitle">Gerenciamento dos pedidos extra√≠dos</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üè∑Ô∏è</span>
                        <h3 class="card-title">O que √© um T√≥pico?</h3>
                    </div>
                    <p>Cada <strong>t√≥pico</strong> representa um pedido ou quest√£o a ser decidida na senten√ßa. O sistema extrai automaticamente:</p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li><strong>T√≠tulo</strong> ‚Äî Nome do pedido (ex: "HORAS EXTRAS")</li>
                        <li><strong>Categoria</strong> ‚Äî Preliminar, Prejudicial, M√©rito ou Processual</li>
                        <li><strong>Mini-relat√≥rio</strong> ‚Äî Resumo autom√°tico das alega√ß√µes das partes</li>
                        <li><strong>Fundamenta√ß√£o</strong> ‚Äî Sua decis√£o (voc√™ redige)</li>
                        <li><strong>Resultado</strong> ‚Äî Procedente, Improcedente ou Parcialmente Procedente</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üõ†Ô∏è</span>
                        <h3 class="card-title">A√ß√µes em Cada T√≥pico</h3>
                    </div>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">‚úèÔ∏è</span>
                            <div class="feature-text">
                                <h4>Editar</h4>
                                <p>Abre o editor para redigir fundamenta√ß√£o e mini-relat√≥rio</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üìù</span>
                            <div class="feature-text">
                                <h4>Renomear</h4>
                                <p>Alterar t√≠tulo (com ou sem regenerar mini-relat√≥rio)</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">‚úÇÔ∏è</span>
                            <div class="feature-text">
                                <h4>Separar (Dividir)</h4>
                                <p>Dividir t√≥pico amplo em m√∫ltiplos subt√≥picos</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üîó</span>
                            <div class="feature-text">
                                <h4>Unir (Mesclar)</h4>
                                <p>Combinar 2+ t√≥picos em um √∫nico (selecione primeiro)</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">‚ÜïÔ∏è</span>
                            <div class="feature-text">
                                <h4>Reordenar</h4>
                                <p>Arraste o card ou use setas/n√∫meros para mudar ordem</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üóëÔ∏è</span>
                            <div class="feature-text">
                                <h4>Excluir</h4>
                                <p>Remover t√≥pico da lista (com confirma√ß√£o)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚öñÔ∏è</span>
                        <h3 class="card-title">Resultado (Decis√£o)</h3>
                    </div>
                    <p>Cada t√≥pico precisa de um <strong>resultado</strong> para gerar o dispositivo:</p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Resultado</th>
                                    <th>√çcone</th>
                                    <th>Significado</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>Procedente</td><td>‚úÖ</td><td>Pedido totalmente acolhido</td></tr>
                                <tr><td>Improcedente</td><td>‚ùå</td><td>Pedido totalmente rejeitado</td></tr>
                                <tr><td>Parcialmente Procedente</td><td>‚öñÔ∏è</td><td>Pedido parcialmente acolhido</td></tr>
                                <tr><td>Acolhido</td><td>‚úÖ</td><td>Alternativa para "Procedente"</td></tr>
                                <tr><td>Rejeitado</td><td>‚ùå</td><td>Alternativa para "Improcedente"</td></tr>
                                <tr><td>Sem Resultado</td><td>‚è∏Ô∏è</td><td>Ainda n√£o decidido</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tip-box info">
                        <span class="tip-icon">üí°</span>
                        <div>O sistema pode <strong>detectar automaticamente</strong> o resultado baseado na fundamenta√ß√£o (badge "Auto" aparece). Voc√™ sempre pode sobrescrever manualmente.</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìù</span>
                        <h3 class="card-title">T√≥picos Especiais</h3>
                    </div>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">üìú</span>
                            <div class="feature-text">
                                <h4>RELAT√ìRIO</h4>
                                <p>Narrativa do hist√≥rico processual. Posi√ß√£o fixa no in√≠cio da senten√ßa.</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">‚ö°</span>
                            <div class="feature-text">
                                <h4>DISPOSITIVO</h4>
                                <p>Parte final com os comandos da senten√ßa. Gerado automaticamente.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üîç</span>
                        <h3 class="card-title">Revisar Senten√ßa</h3>
                    </div>
                    <p>Bot√£o <strong>"Revisar Senten√ßa"</strong> ativa an√°lise cr√≠tica pela IA:</p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li><strong>Omiss√µes</strong> ‚Äî Pedidos/argumentos n√£o abordados</li>
                        <li><strong>Contradi√ß√µes</strong> ‚Äî Conflitos entre fundamenta√ß√£o e dispositivo</li>
                        <li><strong>Obscuridades</strong> ‚Äî Passagens confusas ou amb√≠guas</li>
                    </ul>
                    <p>Resultado inclui nota (A/B/C/D) e recomenda√ß√µes espec√≠ficas para corre√ß√£o.</p>
                </div>

                <!-- NOVO: Exportar Minuta -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìÑ</span>
                        <h3 class="card-title">Exportar Minuta</h3>
                    </div>
                    <p>Bot√£o <strong>"Exportar Minuta"</strong> gera documento formatado com toda a senten√ßa:</p>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">üìã</span>
                            <div class="feature-text">
                                <h4>Estrutura</h4>
                                <p>RELAT√ìRIO ‚Üí FUNDAMENTA√á√ÉO (todos os t√≥picos) ‚Üí DISPOSITIVO</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üìù</span>
                            <div class="feature-text">
                                <h4>Formato</h4>
                                <p>HTML formatado, compat√≠vel para colar no Word ou sistema judicial</p>
                            </div>
                        </div>
                    </div>
                    <div class="tip-box info" style="margin-top: 1rem;">
                        <span class="tip-icon">üí°</span>
                        <div><strong>Dica:</strong> Antes de exportar, confirme que todos os t√≥picos t√™m <strong>resultado definido</strong> e que o <strong>dispositivo foi gerado</strong>.</div>
                    </div>
                </div>
            </div>

            <!-- Provas Tab -->
            <div id="provas" class="tab-content">
                <div class="section-header">
                    <span class="section-icon">‚öñÔ∏è</span>
                    <div>
                        <h2 class="section-title">Provas</h2>
                        <p class="section-subtitle">Gerenciamento de evid√™ncias e an√°lise com IA</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üì§</span>
                        <h3 class="card-title">Upload de Provas</h3>
                    </div>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">üìÑ</span>
                            <div class="feature-text">
                                <h4>Upload de PDFs</h4>
                                <p>Arraste ou clique para enviar m√∫ltiplos PDFs de prova</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üìù</span>
                            <div class="feature-text">
                                <h4>Colar Texto</h4>
                                <p>Adicione transcri√ß√µes, depoimentos ou documentos em texto</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üîó</span>
                        <h3 class="card-title">Vincula√ß√£o de Provas a T√≥picos</h3>
                    </div>
                    <p>Vincular provas aos t√≥picos permite:</p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li>An√°lise contextual mais precisa pela IA</li>
                        <li>Visualiza√ß√£o das provas vinculadas no painel do Editor</li>
                        <li>Refer√™ncia r√°pida durante a reda√ß√£o da fundamenta√ß√£o</li>
                    </ul>
                    <div class="steps">
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Clique em "Vincular a T√≥picos"</h4>
                                <p>No card da prova, abra o modal de vincula√ß√£o</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Selecione os t√≥picos relacionados</h4>
                                <p>Uma prova pode estar vinculada a m√∫ltiplos t√≥picos</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NOVO: Campo Conclus√µes -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚úçÔ∏è</span>
                        <h3 class="card-title">Conclus√µes do Juiz</h3>
                    </div>
                    <p>Ap√≥s analisar uma prova (com IA ou manualmente), voc√™ pode registrar suas conclus√µes:</p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li><strong>Campo "Minhas Conclus√µes"</strong> ‚Äî Clique para editar no card da prova</li>
                        <li>Registre o que voc√™ concluiu sobre a prova (ex: "Comprova v√≠nculo empregat√≠cio")</li>
                        <li>Suas conclus√µes s√£o <strong>enviadas ao Assistente IA</strong> junto com a an√°lise</li>
                        <li>Aparecem na exporta√ß√£o e ficam dispon√≠veis para refer√™ncia</li>
                        <li><strong>Bot√£o üé§ Ditado por Voz</strong> ‚Äî Dite suas conclus√µes usando o microfone</li>
                    </ul>
                    <div class="tip-box success">
                        <span class="tip-icon">‚úÖ</span>
                        <div><strong>Por que usar:</strong> A IA recebe tanto a an√°lise autom√°tica quanto suas conclus√µes, permitindo fundamenta√ß√µes mais precisas e alinhadas com sua convic√ß√£o.</div>
                    </div>
                    <div class="tip-box info">
                        <span class="tip-icon">üé§</span>
                        <div><strong>Ditado por Voz:</strong> O bot√£o de microfone permite ditar suas conclus√µes verbalmente. Se a melhoria autom√°tica estiver ativada em Configura√ß√µes, a IA corrige pontua√ß√£o e formata√ß√£o.</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">ü§ñ</span>
                        <h3 class="card-title">An√°lise de Provas com IA</h3>
                    </div>

                    <div class="collapsible open">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üíú An√°lise Contextual</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p><strong>O que faz:</strong> Compara a prova com as alega√ß√µes da peti√ß√£o e contesta√ß√£o</p>
                                <p><strong>Contexto enviado:</strong> Documentos do processo + mini-relat√≥rios dos t√≥picos vinculados</p>
                                <p><strong>Resultado:</strong> An√°lise de como a prova impacta cada pedido (comprova, refuta ou √© neutra)</p>
                                <div class="tip-box info">
                                    <span class="tip-icon">üí°</span>
                                    <div>Op√ß√£o "Usar apenas mini-relat√≥rios" economiza tokens quando voc√™ quer contexto resumido.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üíö An√°lise Livre</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p><strong>O que faz:</strong> Envia apenas a prova + suas instru√ß√µes personalizadas</p>
                                <p><strong>Contexto enviado:</strong> Nenhum (ou t√≥picos vinculados se ativado)</p>
                                <p><strong>Ideal para:</strong> Perguntas espec√≠ficas, extra√ß√µes de dados, an√°lises pontuais</p>
                                <p><strong>Exemplo:</strong> "Identifique os valores mencionados nesta prova"</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tip-box warning">
                    <span class="tip-icon">‚ö†Ô∏è</span>
                    <div>
                        <strong>Com Anonimiza√ß√£o Ativa:</strong> PDFs devem ter texto extra√≠do antes de analisar. Clique em "Extrair Texto" primeiro. O badge "‚ö†Ô∏è CONFLITO" indica que precisa resolver.
                    </div>
                </div>

                <div class="tip-box warning">
                    <span class="tip-icon">üåê</span>
                    <div>
                        <strong>Grok e PDFs:</strong> O Grok n√£o suporta an√°lise de PDF bin√°rio. Ao usar Grok como provedor, voc√™ deve extrair o texto da prova primeiro. O bot√£o "Usar PDF" fica desabilitado e um badge laranja "Grok n√£o suporta PDF" aparece no card.
                    </div>
                </div>

                <!-- NOVO: Provas no Assistente IA -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üí¨</span>
                        <h3 class="card-title">Provas no Assistente IA (Chat)</h3>
                    </div>
                    <p>Quando voc√™ usa o Assistente IA no editor, as provas vinculadas ao t√≥pico s√£o enviadas automaticamente. Voc√™ controla <strong>o que √© enviado</strong>:</p>

                    <div class="collapsible open">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üìä Modo Padr√£o (Toggle desligado)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p>Por padr√£o, o Assistente IA recebe apenas:</p>
                                <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                    <li><strong>Nome da prova</strong></li>
                                    <li><strong>Resultado da an√°lise</strong> (contextual ou livre, se houver)</li>
                                    <li><strong>Conclus√µes do juiz</strong> (se preenchidas)</li>
                                </ul>
                                <div class="tip-box info">
                                    <span class="tip-icon">üí°</span>
                                    <div><strong>Vantagem:</strong> Economiza tokens, pois n√£o envia o conte√∫do completo da prova.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üìÑ Modo Conte√∫do Integral (Toggle ligado)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p>Ao ativar o toggle <strong>"Enviar conte√∫do integral"</strong> no card da prova, o Assistente IA recebe:</p>
                                <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                    <li>Tudo do modo padr√£o, <strong>mais</strong>:</li>
                                    <li><strong>Conte√∫do completo da prova</strong> (texto extra√≠do ou PDF bin√°rio)</li>
                                </ul>
                                <div class="tip-box warning">
                                    <span class="tip-icon">‚ö†Ô∏è</span>
                                    <div><strong>Aten√ß√£o:</strong> Consome significativamente mais tokens. Use quando precisar que a IA consulte detalhes espec√≠ficos da prova.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üîó Vincula√ß√£o e Escopo</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p><strong>Importante:</strong> Apenas provas <strong>vinculadas ao t√≥pico sendo editado</strong> s√£o enviadas ao Assistente IA.</p>
                                <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                                    <li>Se uma prova est√° vinculada aos t√≥picos A e B, ela ser√° enviada ao editar A ou B</li>
                                    <li>Se uma prova n√£o est√° vinculada a nenhum t√≥pico, ela <strong>n√£o √© enviada</strong> ao chat</li>
                                    <li>A configura√ß√£o "Enviar conte√∫do integral" √© <strong>por prova</strong> (n√£o global)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="table-container" style="margin-top: 1rem;">
                        <table>
                            <thead>
                                <tr>
                                    <th>Toggle</th>
                                    <th>O que √© enviado</th>
                                    <th>Consumo de tokens</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Desligado (padr√£o)</td>
                                    <td>Nome + An√°lise + Conclus√µes</td>
                                    <td>Baixo</td>
                                </tr>
                                <tr>
                                    <td>Ligado</td>
                                    <td>Nome + An√°lise + Conclus√µes + <strong>Conte√∫do completo</strong></td>
                                    <td>Alto</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Editor Tab -->
            <div id="editor" class="tab-content">
                <div class="section-header">
                    <span class="section-icon">‚úèÔ∏è</span>
                    <div>
                        <h2 class="section-title">Editor</h2>
                        <p class="section-subtitle">Reda√ß√£o da fundamenta√ß√£o com sugest√µes inteligentes</p>
                    </div>
                </div>

                <!-- NOVO: Tipos de Editor -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üîÄ</span>
                        <h3 class="card-title">Tipos de Editor</h3>
                    </div>
                    <p>O sistema oferece <strong>dois modos de edi√ß√£o</strong> com caracter√≠sticas distintas:</p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Editor</th>
                                    <th>Acesso</th>
                                    <th>Caracter√≠sticas</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Editor Individual</strong></td>
                                    <td>Bot√£o "Editar" no card do t√≥pico</td>
                                    <td>Edita <strong>um t√≥pico por vez</strong>. Tem modo Fullscreen (<kbd>Ctrl+F</kbd>). Painel lateral de sugest√µes. Split mode com modelos.</td>
                                </tr>
                                <tr>
                                    <td><strong>Editor Global</strong></td>
                                    <td>Bot√£o "Edi√ß√£o Global" na aba T√≥picos</td>
                                    <td>Edita <strong>m√∫ltiplos t√≥picos</strong> selecionados simultaneamente. Exibe todos em sequ√™ncia. Ideal para revis√£o e consist√™ncia.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tip-box info">
                        <span class="tip-icon">üí°</span>
                        <div><strong>Quando usar:</strong> Use o <em>Individual</em> para trabalho focado em um t√≥pico. Use o <em>Global</em> para revisar/ajustar v√°rios t√≥picos de uma vez.</div>
                    </div>
                </div>

                <!-- NOVO: Bot√µes da Toolbar -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üõ†Ô∏è</span>
                        <h3 class="card-title">Bot√µes da Toolbar</h3>
                    </div>
                    <p>Bot√µes dispon√≠veis no topo do editor:</p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Bot√£o</th>
                                    <th>√çcone</th>
                                    <th>Fun√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Jurisprud√™ncia</strong></td>
                                    <td>üìñ</td>
                                    <td>Abre modal de busca de precedentes (TST, STF, OJs, S√∫mulas, IRRs)</td>
                                </tr>
                                <tr>
                                    <td><strong>Extrair Modelo</strong></td>
                                    <td>ü§ñ</td>
                                    <td>IA <strong>generaliza</strong> a fundamenta√ß√£o e cria modelo reutiliz√°vel (remove nomes, valores, datas)</td>
                                </tr>
                                <tr>
                                    <td><strong>Salvar como Modelo</strong></td>
                                    <td>üíæ</td>
                                    <td>Salva a fundamenta√ß√£o <strong>como est√°</strong> na biblioteca de modelos (sem generaliza√ß√£o)</td>
                                </tr>
                                <tr>
                                    <td><strong>Assistente IA</strong></td>
                                    <td>üí¨</td>
                                    <td>Abre chat interativo para tirar d√∫vidas, gerar textos, analisar provas</td>
                                </tr>
                                <tr>
                                    <td><strong>Regenerar Relat√≥rio</strong></td>
                                    <td>üîÑ</td>
                                    <td>Regenera o mini-relat√≥rio do t√≥pico com IA (√∫til ap√≥s renomear/ajustar)</td>
                                </tr>
                                <tr>
                                    <td><strong>Ditado por Voz</strong></td>
                                    <td>üé§</td>
                                    <td>Dita texto por voz usando o microfone (com melhoria autom√°tica por IA)</td>
                                </tr>
                                <tr>
                                    <td><strong>Confronto de Fatos</strong></td>
                                    <td>‚öîÔ∏è</td>
                                    <td>Abre modal para comparar alega√ß√µes da Peti√ß√£o vs Contesta√ß√£o</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- NOVO: Ditado por Voz -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üé§</span>
                        <h3 class="card-title">Ditado por Voz</h3>
                    </div>
                    <p>Clique no bot√£o <strong>üé§</strong> na toolbar do editor para ditar texto usando seu microfone.</p>

                    <div class="steps">
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Clique no microfone</h4>
                                <p>O bot√£o fica vermelho indicando que est√° gravando</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Fale normalmente</h4>
                                <p>O texto √© transcrito automaticamente pelo navegador</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Clique novamente para parar</h4>
                                <p>O texto √© inserido no editor (com melhoria autom√°tica se ativada)</p>
                            </div>
                        </div>
                    </div>

                    <div class="tip-box info">
                        <span class="tip-icon">‚ú®</span>
                        <div><strong>Melhoria Autom√°tica:</strong> Se ativada em Configura√ß√µes, a IA corrige pontua√ß√£o, formata√ß√£o e palavras mal reconhecidas automaticamente.</div>
                    </div>
                </div>

                <!-- NOVO: Confronto de Fatos -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚öîÔ∏è</span>
                        <h3 class="card-title">Confronto de Fatos</h3>
                    </div>
                    <p>O bot√£o <strong>"Confronto de Fatos"</strong> abre um modal para <strong>comparar alega√ß√µes</strong> da Peti√ß√£o Inicial com a Contesta√ß√£o e eventuais Impugna√ß√µes.</p>

                    <p style="margin-top: 1rem;"><strong>O que a IA analisa:</strong></p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li>Alega√ß√µes do reclamante na Peti√ß√£o</li>
                        <li>Defesa da reclamada na Contesta√ß√£o</li>
                        <li>Impugna√ß√µes de ambas as partes</li>
                        <li>Classifica cada fato como <strong>controverso</strong> ou <strong>incontroverso</strong></li>
                    </ul>

                    <p style="margin-top: 1rem;"><strong>Resultado:</strong></p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Coluna</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><strong>Tema</strong></td><td>Assunto/fato em discuss√£o</td></tr>
                                <tr><td><strong>Peti√ß√£o</strong></td><td>O que o reclamante alegou</td></tr>
                                <tr><td><strong>Contesta√ß√£o</strong></td><td>O que a reclamada respondeu</td></tr>
                                <tr><td><strong>Status</strong></td><td><span class="badge badge-red">Controverso</span> ou <span class="badge badge-green">Incontroverso</span></td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="tip-box success">
                        <span class="tip-icon">üíæ</span>
                        <div><strong>Cache:</strong> O resultado √© salvo automaticamente. Se reabrir o modal para o mesmo t√≥pico, recupera do cache (badge "cache" aparece).</div>
                    </div>
                </div>

                <!-- NOVO: Formata√ß√£o Avan√ßada -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üé®</span>
                        <h3 class="card-title">Formata√ß√£o Avan√ßada</h3>
                    </div>
                    <p>Controles de visualiza√ß√£o na barra superior do editor:</p>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">Aa</span>
                            <div class="feature-text">
                                <h4>Tamanho de Fonte</h4>
                                <p>Dropdown com op√ß√µes de tamanho (pequeno, normal, grande, etc.)</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">‚ÜïÔ∏è</span>
                            <div class="feature-text">
                                <h4>Espa√ßamento</h4>
                                <p>Controle de espa√ßamento entre par√°grafos (line-height)</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üåì</span>
                            <div class="feature-text">
                                <h4>Tema do Editor</h4>
                                <p>Toggle escuro/claro (independente do tema geral)</p>
                            </div>
                        </div>
                    </div>
                    <div class="tip-box info">
                        <span class="tip-icon">‚ÑπÔ∏è</span>
                        <div>Esses controles afetam apenas a <strong>visualiza√ß√£o no editor</strong>, n√£o o HTML final exportado.</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üñäÔ∏è</span>
                        <h3 class="card-title">Editor de Texto Rico</h3>
                    </div>
                    <p>O editor Quill.js oferece formata√ß√£o completa:</p>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon"><strong>B</strong></span>
                            <div class="feature-text">
                                <h4>Formata√ß√£o B√°sica</h4>
                                <p>Negrito, It√°lico, Sublinhado, Riscado</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üìã</span>
                            <div class="feature-text">
                                <h4>Listas</h4>
                                <p>Numeradas, com marcadores, indenta√ß√£o</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">‚â°</span>
                            <div class="feature-text">
                                <h4>Alinhamento</h4>
                                <p>Esquerda, Centro, Direita, Justificado</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">H1</span>
                            <div class="feature-text">
                                <h4>Cabe√ßalhos</h4>
                                <p>H1, H2, H3, H4 para hierarquia</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- EXPANDIDO: Sugest√µes de Modelos com a√ß√µes -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üí°</span>
                        <h3 class="card-title">Sugest√µes de Modelos</h3>
                    </div>
                    <p>Ao editar um t√≥pico, o painel lateral exibe at√© 5 modelos relevantes. <strong>Ranking por estrelas:</strong></p>
                    <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
                        <li>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê = 1¬∫ mais relevante</li>
                        <li>‚≠ê‚≠ê‚≠ê‚≠ê = 2¬∫ mais relevante, e assim por diante</li>
                    </ul>

                    <p style="margin-top: 1rem;"><strong>A√ß√µes dispon√≠veis em cada sugest√£o:</strong></p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>A√ß√£o</th>
                                    <th>√çcone</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Inserir</strong></td>
                                    <td>‚ûï</td>
                                    <td>Insere o conte√∫do completo do modelo no campo Fundamenta√ß√£o (append)</td>
                                </tr>
                                <tr>
                                    <td><strong>Visualizar</strong></td>
                                    <td>üëÅÔ∏è</td>
                                    <td>Abre preview em modal para ver o modelo completo antes de inserir</td>
                                </tr>
                                <tr>
                                    <td><strong>Copiar</strong></td>
                                    <td>üìã</td>
                                    <td>Copia o conte√∫do do modelo para a √°rea de transfer√™ncia</td>
                                </tr>
                                <tr>
                                    <td><strong>QuickEdit</strong></td>
                                    <td>‚úèÔ∏è</td>
                                    <td>Abre o modelo para edi√ß√£o r√°pida antes de inserir (permite ajustes)</td>
                                </tr>
                                <tr>
                                    <td><strong>Favoritar</strong></td>
                                    <td>‚≠ê</td>
                                    <td>Marca/desmarca como favorito (favoritos aparecem no topo)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tip-box info">
                        <span class="tip-icon">üß†</span>
                        <div>Com <strong>IA Local ativa</strong>, as sugest√µes s√£o calculadas por busca sem√¢ntica (badge "ü§ñ IA Local"), sem custo de API e instantaneamente.</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">ü§ñ</span>
                        <h3 class="card-title">Assistente IA (Chat)</h3>
                    </div>
                    <p>Bot√£o <strong>"Assistente IA"</strong> abre chat interativo para tirar d√∫vidas, gerar textos e analisar provas.</p>

                    <p style="margin-top: 1rem;"><strong>Recursos:</strong></p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li>Contexto autom√°tico (t√≠tulo, relat√≥rio, fundamenta√ß√£o atual)</li>
                        <li>Conversa√ß√£o multi-turno (hist√≥rico de at√© 20 mensagens)</li>
                        <li>Bot√£o <strong>"Usar Mensagem"</strong> para inserir resposta no editor</li>
                        <li>Prompts r√°pidos pr√©-configurados (Avaliar, Melhorar, Verificar Omiss√µes)</li>
                        <li><strong>Hist√≥rico persistente</strong> ‚Äî chat √© salvo por t√≥pico e persiste ap√≥s F5</li>
                        <li>Bot√£o <strong>"Limpar Chat"</strong> para resetar o hist√≥rico</li>
                    </ul>

                    <p style="margin-top: 1rem;"><strong>Controle de Escopo do Contexto:</strong></p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Escopo</th>
                                    <th>O que a IA recebe</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><strong>Apenas T√≥pico Atual</strong></td><td>Mini-relat√≥rio e decis√£o do t√≥pico sendo editado</td></tr>
                                <tr><td><strong>T√≥picos Selecionados</strong></td><td>Mini-relat√≥rios e decis√µes dos t√≥picos que voc√™ marcar</td></tr>
                                <tr><td><strong>Toda a Decis√£o</strong></td><td>RELAT√ìRIO + todos os t√≥picos (contexto completo)</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="tip-box info">
                        <span class="tip-icon">üìÑ</span>
                        <div><strong>Toggle "Incluir documentos principais":</strong> Se desativado, a IA n√£o recebe peti√ß√£o/contesta√ß√£o ‚Äî √∫til para economizar tokens quando voc√™ s√≥ quer discutir o texto j√° escrito.</div>
                    </div>

                    <div class="tip-box success">
                        <span class="tip-icon">üéì</span>
                        <div><strong>Estagi√°rio Socr√°tico:</strong> A IA verifica se sua instru√ß√£o cont√©m o fundamento da decis√£o (ratio decidendi). Se a instru√ß√£o for vaga (ex: "Indefira as horas extras"), ela pergunta qual a tese antes de redigir.</div>
                    </div>
                </div>

                <!-- NOVO: Slash Menu - Inser√ß√£o r√°pida de modelos -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚ö°</span>
                        <h3 class="card-title">Slash Menu (Inserir Modelos)</h3>
                    </div>
                    <p>No <strong>editor de fundamenta√ß√£o</strong>, digite <kbd>/</kbd> para abrir o menu de inser√ß√£o r√°pida de modelos:</p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li>Um menu aparece com seus modelos dispon√≠veis</li>
                        <li>Continue digitando para <strong>filtrar</strong> por t√≠tulo/keywords</li>
                        <li>Use <kbd>‚Üë</kbd> <kbd>‚Üì</kbd> para navegar, <kbd>Enter</kbd> para inserir</li>
                        <li>O conte√∫do do modelo selecionado √© inserido no cursor</li>
                    </ul>
                    <div class="tip-box info" style="margin-top: 1rem;">
                        <span class="tip-icon">üí°</span>
                        <div>Ideal para inserir trechos padronizados rapidamente. Funciona no campo Fundamenta√ß√£o tanto no editor individual quanto no global.</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìú</span>
                        <h3 class="card-title">Versionamento (Hist√≥rico)</h3>
                    </div>
                    <p>O sistema salva automaticamente <strong>at√© 10 vers√µes</strong> do campo Fundamenta√ß√£o:</p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li>Bot√£o <strong>üìú (N)</strong> mostra quantidade de vers√µes</li>
                        <li>Clique para ver dropdown com timestamps</li>
                        <li>Selecione uma vers√£o para comparar (lado a lado)</li>
                        <li>Bot√£o <strong>"Restaurar"</strong> volta √†quela vers√£o (salva atual antes)</li>
                    </ul>
                    <div class="tip-box success">
                        <span class="tip-icon">‚úÖ</span>
                        <div>Vers√µes s√£o salvas automaticamente ao sair do campo (blur). Edite com confian√ßa!</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üñ•Ô∏è</span>
                        <h3 class="card-title">Modos de Tela</h3>
                    </div>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">‚õ∂</span>
                            <div class="feature-text">
                                <h4>Fullscreen</h4>
                                <p><kbd>Ctrl+F</kbd> ‚Äî Editor ocupa 100% da tela (apenas Editor Individual)</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üìö</span>
                            <div class="feature-text">
                                <h4>Split Mode</h4>
                                <p><kbd>Ctrl+M</kbd> ‚Äî Editor + Modelos lado a lado</p>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top: 1rem;">No Split Mode, arraste o divisor central para ajustar a propor√ß√£o (m√≠n 20%, m√°x 80%).</p>
                </div>
            </div>

            <!-- Jurisprudencia Tab -->
            <div id="juris" class="tab-content">
                <div class="section-header">
                    <span class="section-icon">üìñ</span>
                    <div>
                        <h2 class="section-title">Jurisprud√™ncia</h2>
                        <p class="section-subtitle">Busca de precedentes e teses vinculantes</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìö</span>
                        <h3 class="card-title">Tipos de Precedentes</h3>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Tipo</th>
                                    <th>Descri√ß√£o</th>
                                    <th>Tribunais</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><strong>S√∫mula</strong></td><td>Entendimento pacificado</td><td>TST, STF, STJ</td></tr>
                                <tr><td><strong>OJ</strong></td><td>Orienta√ß√£o Jurisprudencial</td><td>TST (SDI-1, SDI-2, SDC)</td></tr>
                                <tr><td><strong>IRR</strong></td><td>Incidente de Recursos Repetitivos</td><td>TST</td></tr>
                                <tr><td><strong>IAC</strong></td><td>Incidente de Assun√ß√£o de Compet√™ncia</td><td>TST</td></tr>
                                <tr><td><strong>IRDR</strong></td><td>Incidente de Demandas Repetitivas</td><td>STJ, STF</td></tr>
                                <tr><td><strong>Informativo</strong></td><td>Resumos de decis√µes relevantes</td><td>TST</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üîç</span>
                        <h3 class="card-title">Modos de Busca</h3>
                    </div>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">üî§</span>
                            <div class="feature-text">
                                <h4>Busca Textual</h4>
                                <p>Por palavras-chave, n√∫mero do tema, t√≠tulo. Hierarquiza automaticamente TST > STF > STJ.</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üß†</span>
                            <div class="feature-text">
                                <h4>Busca Sem√¢ntica</h4>
                                <p>Por significado. "Trabalho extraordin√°rio" encontra "horas extras". Mostra % de similaridade.</p>
                            </div>
                        </div>
                    </div>
                    <div class="tip-box info">
                        <span class="tip-icon">üí°</span>
                        <div>Toggle <strong>üß†/üî§</strong> alterna entre os modos. Busca sem√¢ntica requer embeddings importados (ver se√ß√£o IA Local).</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üéöÔ∏è</span>
                        <h3 class="card-title">Filtros Dispon√≠veis</h3>
                    </div>
                    <div class="quick-ref">
                        <div class="quick-ref-item"><span class="badge badge-purple">IRR</span></div>
                        <div class="quick-ref-item"><span class="badge badge-purple">IAC</span></div>
                        <div class="quick-ref-item"><span class="badge badge-purple">S√∫mula</span></div>
                        <div class="quick-ref-item"><span class="badge badge-purple">OJ</span></div>
                        <div class="quick-ref-item"><span class="badge badge-purple">Informativo</span></div>
                        <div class="quick-ref-item"><span class="badge badge-blue">TST</span></div>
                        <div class="quick-ref-item"><span class="badge badge-blue">STF</span></div>
                        <div class="quick-ref-item"><span class="badge badge-blue">STJ</span></div>
                    </div>
                    <p style="margin-top: 1rem;">Clique nos filtros para ativar/desativar. M√∫ltiplos filtros funcionam com l√≥gica AND.</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìã</span>
                        <h3 class="card-title">Como Inserir na Fundamenta√ß√£o</h3>
                    </div>
                    <div class="steps">
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Busque o precedente</h4>
                                <p>Use filtros e busca (textual ou sem√¢ntica) para encontrar</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Clique em "Copiar"</h4>
                                <p>O bot√£o üìã copia a tese completa formatada para o clipboard</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Cole no Editor</h4>
                                <p>V√° ao campo Fundamenta√ß√£o e cole (Ctrl+V)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Legislacao Tab -->
            <div id="legis" class="tab-content">
                <div class="section-header">
                    <span class="section-icon">üìú</span>
                    <div>
                        <h2 class="section-title">Legisla√ß√£o</h2>
                        <p class="section-subtitle">Consulta de artigos e dispositivos legais</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìö</span>
                        <h3 class="card-title">Leis Dispon√≠veis</h3>
                    </div>
                    <div class="quick-ref">
                        <div class="quick-ref-item"><span class="badge badge-blue">CLT</span> Consolida√ß√£o das Leis do Trabalho</div>
                        <div class="quick-ref-item"><span class="badge badge-purple">CF/88</span> Constitui√ß√£o Federal</div>
                        <div class="quick-ref-item"><span class="badge badge-green">CPC</span> C√≥digo de Processo Civil</div>
                        <div class="quick-ref-item"><span class="badge badge-amber">CC</span> C√≥digo Civil</div>
                        <div class="quick-ref-item"><span class="badge badge-red">CDC</span> C√≥digo de Defesa do Consumidor</div>
                    </div>
                    <p style="margin-top: 1rem;">Leis adicionais podem ser importadas via JSON.</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üîç</span>
                        <h3 class="card-title">Modos de Busca</h3>
                    </div>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">üî§</span>
                            <div class="feature-text">
                                <h4>Busca Textual</h4>
                                <p>Por n√∫mero do artigo ou palavras-chave. Ex: "7" encontra Art. 7¬∫</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üß†</span>
                            <div class="feature-text">
                                <h4>Busca Sem√¢ntica</h4>
                                <p>Por significado. "Limite de jornada" encontra Art. 58 CLT</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìÑ</span>
                        <h3 class="card-title">Estrutura dos Artigos</h3>
                    </div>
                    <p>Cada artigo √© exibido com estrutura completa:</p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li><strong>Caput</strong> ‚Äî Texto principal do artigo</li>
                        <li><strong>Par√°grafos (¬ß)</strong> ‚Äî Subdivis√µes do caput</li>
                        <li><strong>Incisos (I, II, III...)</strong> ‚Äî Itens enumerados</li>
                        <li><strong>Al√≠neas (a, b, c...)</strong> ‚Äî Sub-itens dos incisos</li>
                    </ul>
                    <div class="tip-box success">
                        <span class="tip-icon">‚ú®</span>
                        <div>Na busca sem√¢ntica, o trecho mais similar √© <span class="highlight">destacado em amarelo</span> para f√°cil identifica√ß√£o.</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚öôÔ∏è</span>
                        <h3 class="card-title">Threshold (Limite de Similaridade)</h3>
                    </div>
                    <p>Ajuste o threshold em <strong>Configura√ß√µes IA > Legisla√ß√£o</strong>:</p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Threshold</th>
                                    <th>Resultados</th>
                                    <th>Quando usar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>20-30%</td><td>Muitos (menos precisos)</td><td>Pesquisas explorat√≥rias</td></tr>
                                <tr><td>40-50%</td><td>Equilibrado</td><td>Uso padr√£o</td></tr>
                                <tr><td>60-80%</td><td>Poucos (muito precisos)</td><td>Busca espec√≠fica</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Modelos Tab -->
            <div id="modelos" class="tab-content">
                <div class="section-header">
                    <span class="section-icon">üì¶</span>
                    <div>
                        <h2 class="section-title">Modelos</h2>
                        <p class="section-subtitle">Biblioteca de templates reutiliz√°veis</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìù</span>
                        <h3 class="card-title">O que √© um Modelo?</h3>
                    </div>
                    <p>Um <strong>modelo</strong> √© um template de fundamenta√ß√£o gen√©rica que pode ser reutilizado em diferentes processos. Cada modelo cont√©m:</p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Campo</th>
                                    <th>Obrigat√≥rio</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><strong>T√≠tulo</strong></td><td>‚úÖ</td><td>Nome descritivo (ex: "HORAS EXTRAS - PROCEDENTE")</td></tr>
                                <tr><td><strong>Conte√∫do</strong></td><td>‚úÖ</td><td>Fundamenta√ß√£o jur√≠dica gen√©rica (HTML formatado)</td></tr>
                                <tr><td><strong>Categoria</strong></td><td>‚ùå</td><td>Classifica√ß√£o tem√°tica (ex: "Jornada de Trabalho")</td></tr>
                                <tr><td><strong>Palavras-chave</strong></td><td>‚ùå</td><td>Tags para busca (separadas por v√≠rgula)</td></tr>
                                <tr><td><strong>Favorito</strong></td><td>‚ùå</td><td>Marca√ß√£o para acesso r√°pido</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚ûï</span>
                        <h3 class="card-title">Formas de Criar Modelos</h3>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>‚úèÔ∏è Cria√ß√£o Manual</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p>Bot√£o <strong>"Novo Modelo"</strong> abre formul√°rio para preencher manualmente.</p>
                                <p>Dica: Bot√£o <strong>"Gerar com IA"</strong> cria t√≠tulo e palavras-chave automaticamente baseado no conte√∫do.</p>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üíæ Salvar T√≥pico como Modelo</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p>No Editor de t√≥pico, clique em <strong>"Salvar como Modelo"</strong>.</p>
                                <p>A fundamenta√ß√£o atual √© convertida em modelo reutiliz√°vel.</p>
                                <div class="tip-box warning" style="margin-top: 0.75rem;">
                                    <span class="tip-icon">üîç</span>
                                    <div>
                                        <strong>Detec√ß√£o de Duplicatas:</strong> O sistema usa TF-IDF para verificar se j√° existe modelo similar. Se encontrado, exibe compara√ß√£o lado a lado com % de similaridade, permitindo decidir entre atualizar o existente ou criar novo.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>ü§ñ Extrair com IA (Generaliza√ß√£o)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p>Bot√£o <strong>"Extrair Modelo com IA"</strong> no Editor.</p>
                                <p>A IA remove nomes, valores, datas espec√≠ficas e cria vers√£o gen√©rica automaticamente.</p>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üìÅ Cria√ß√£o em Lote (Bulk)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p>Bot√£o <strong>"Criar de Arquivos"</strong> processa m√∫ltiplos arquivos (PDF, DOCX, TXT).</p>
                                <p>A IA extrai modelos automaticamente de cada arquivo (at√© 20 por lote).</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üí°</span>
                        <h3 class="card-title">Sugest√µes Autom√°ticas</h3>
                    </div>
                    <p>Enquanto voc√™ edita um t√≥pico, o sistema busca modelos similares automaticamente:</p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li><strong>TF-IDF</strong> ‚Äî Algoritmo de relev√¢ncia por frequ√™ncia de termos</li>
                        <li><strong>Refinamento com IA</strong> ‚Äî Claude ordena os top 10 por pertin√™ncia real</li>
                        <li><strong>IA Local</strong> ‚Äî Se ativa, usa embeddings (instant√¢neo, sem custo)</li>
                    </ul>
                    <div class="tip-box info">
                        <span class="tip-icon">üß†</span>
                        <div>Ative <strong>"Sugest√µes via IA Local"</strong> nas configura√ß√µes para sugest√µes instant√¢neas sem custo de API.</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üíæ</span>
                        <h3 class="card-title">Importar / Exportar</h3>
                    </div>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">üì§</span>
                            <div class="feature-text">
                                <h4>Exportar</h4>
                                <p>Baixa JSON com todos os modelos (inclui embeddings se gerados)</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üì•</span>
                            <div class="feature-text">
                                <h4>Importar</h4>
                                <p>Carrega modelos de JSON exportado anteriormente (detecta duplicatas)</p>
                            </div>
                        </div>
                    </div>
                    <div class="tip-box warning">
                        <span class="tip-icon">‚ö†Ô∏è</span>
                        <div>Fa√ßa backup regularmente! Exporte seus modelos antes de limpar dados do navegador.</div>
                    </div>
                </div>

                <!-- NOVO: Sincroniza√ß√£o na Nuvem -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚òÅÔ∏è</span>
                        <h3 class="card-title">Sincroniza√ß√£o na Nuvem</h3>
                    </div>
                    <p>Seus modelos podem ser sincronizados automaticamente com o servidor, permitindo acesso de qualquer dispositivo.</p>

                    <p style="margin-top: 1rem;"><strong>Como funciona:</strong></p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li>Fa√ßa login com seu e-mail (link m√°gico, sem senha)</li>
                        <li>Os modelos s√£o sincronizados automaticamente em segundo plano</li>
                        <li>Indicador de status mostra quando est√° sincronizando</li>
                        <li>Funciona entre computador, notebook e outros navegadores</li>
                    </ul>

                    <p style="margin-top: 1rem;"><strong>Google Drive:</strong></p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li><strong>Salvar projeto</strong> ‚Äî Salva o projeto atual no seu Drive</li>
                        <li><strong>Carregar projeto</strong> ‚Äî Lista e carrega projetos salvos</li>
                        <li><strong>Backup autom√°tico</strong> ‚Äî Seus arquivos ficam no seu Drive pessoal</li>
                    </ul>

                    <div class="tip-box info">
                        <span class="tip-icon">üîó</span>
                        <div><strong>Compartilhamento:</strong> Voc√™ pode compartilhar sua biblioteca de modelos com colegas. O destinat√°rio recebe um link e importa os modelos para sua conta.</div>
                    </div>
                </div>
            </div>

            <!-- Config Tab -->
            <div id="config" class="tab-content">
                <div class="section-header">
                    <span class="section-icon">‚öôÔ∏è</span>
                    <div>
                        <h2 class="section-title">Configura√ß√µes IA</h2>
                        <p class="section-subtitle">Personaliza√ß√£o do comportamento do sistema</p>
                    </div>
                </div>

                <!-- NOVO: Provedores de IA -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üåê</span>
                        <h3 class="card-title">Provedores de IA</h3>
                    </div>
                    <p>O SentencifyAI suporta <strong>4 provedores</strong> de IA. Cada um tem caracter√≠sticas e pre√ßos diferentes:</p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Provider</th>
                                    <th>Modelo Principal</th>
                                    <th>Reasoning</th>
                                    <th>PDF Bin√°rio</th>
                                    <th>Pre√ßo Relativo</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Claude</strong> (Anthropic)</td>
                                    <td>Sonnet 4</td>
                                    <td><span class="badge badge-green">‚úì Extended Thinking</span></td>
                                    <td><span class="badge badge-green">‚úì Suporta</span></td>
                                    <td>Base (1x)</td>
                                </tr>
                                <tr>
                                    <td><strong>Gemini</strong> (Google)</td>
                                    <td>2.5 Flash / Pro</td>
                                    <td><span class="badge badge-green">‚úì Thinking</span></td>
                                    <td><span class="badge badge-green">‚úì Suporta</span></td>
                                    <td>~50% mais barato</td>
                                </tr>
                                <tr>
                                    <td><strong>OpenAI</strong></td>
                                    <td>GPT-5.2</td>
                                    <td><span class="badge badge-green">‚úì Reasoning</span></td>
                                    <td><span class="badge badge-green">‚úì Suporta</span></td>
                                    <td>Similar ao Claude</td>
                                </tr>
                                <tr>
                                    <td><strong>Grok</strong> (xAI)</td>
                                    <td>Grok 4.1</td>
                                    <td><span class="badge badge-amber">Embutido</span></td>
                                    <td><span class="badge badge-red">‚úó N√£o suporta</span></td>
                                    <td><strong>96% mais barato</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tip-box info">
                        <span class="tip-icon">üîë</span>
                        <div><strong>API Keys:</strong> Configure a chave de cada provedor em Configura√ß√µes IA. O bot√£o "Testar" verifica se a chave est√° v√°lida.</div>
                    </div>
                    <div class="tip-box warning">
                        <span class="tip-icon">‚ö†Ô∏è</span>
                        <div><strong>Grok e PDFs:</strong> O Grok n√£o suporta PDF bin√°rio. Ao usar Grok, a op√ß√£o "PDF Puro" √© desabilitada e voc√™ deve extrair o texto primeiro.</div>
                    </div>
                </div>

                <!-- NOVO: Double Check -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚úÖ</span>
                        <h3 class="card-title">Double Check (Verifica√ß√£o Secund√°ria)</h3>
                    </div>
                    <p>O Double Check √© uma <strong>segunda verifica√ß√£o</strong> das respostas da IA, usando outro modelo para detectar erros, omiss√µes ou inconsist√™ncias.</p>

                    <p style="margin-top: 1rem;"><strong>Opera√ß√µes suportadas:</strong></p>
                    <div class="quick-ref">
                        <div class="quick-ref-item"><span class="badge badge-green">‚úì</span> Extra√ß√£o de T√≥picos</div>
                        <div class="quick-ref-item"><span class="badge badge-green">‚úì</span> Gera√ß√£o de Dispositivo</div>
                        <div class="quick-ref-item"><span class="badge badge-green">‚úì</span> Revisar Senten√ßa</div>
                        <div class="quick-ref-item"><span class="badge badge-green">‚úì</span> Confronto de Fatos</div>
                        <div class="quick-ref-item"><span class="badge badge-green">‚úì</span> An√°lise de Provas</div>
                        <div class="quick-ref-item"><span class="badge badge-green">‚úì</span> Quick Prompts</div>
                    </div>

                    <p style="margin-top: 1rem;"><strong>Como funciona:</strong></p>
                    <div class="steps">
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>IA principal gera resposta</h4>
                                <p>O modelo selecionado (ex: Claude Sonnet) processa sua solicita√ß√£o</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Modelo verificador analisa</h4>
                                <p>Outro modelo (configur√°vel) revisa a resposta buscando erros</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Modal de corre√ß√µes</h4>
                                <p>Se encontrar problemas, abre modal para voc√™ aceitar/rejeitar cada corre√ß√£o</p>
                            </div>
                        </div>
                    </div>

                    <div class="tip-box warning">
                        <span class="tip-icon">üí∞</span>
                        <div><strong>Custo adicional:</strong> O Double Check faz uma requisi√ß√£o extra √† API. Use em casos importantes onde a precis√£o √© cr√≠tica.</div>
                    </div>
                </div>

                <!-- NOVO: Melhoria de Voz -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üé§</span>
                        <h3 class="card-title">Melhoria Autom√°tica de Voz</h3>
                    </div>
                    <p>Quando voc√™ usa o <strong>ditado por voz</strong>, a IA pode melhorar automaticamente o texto transcrito.</p>

                    <p style="margin-top: 1rem;"><strong>O que a IA corrige:</strong></p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li>Pontua√ß√£o ausente ou incorreta</li>
                        <li>Formata√ß√£o de par√°grafos</li>
                        <li>Palavras mal reconhecidas pelo speech-to-text</li>
                        <li>Estrutura das frases (sem alterar o conte√∫do)</li>
                    </ul>

                    <p style="margin-top: 1rem;"><strong>Modelos r√°pidos dispon√≠veis:</strong></p>
                    <div class="quick-ref">
                        <div class="quick-ref-item"><span class="badge badge-purple">Claude</span> Haiku</div>
                        <div class="quick-ref-item"><span class="badge badge-blue">Gemini</span> Flash</div>
                        <div class="quick-ref-item"><span class="badge badge-green">OpenAI</span> GPT-4o Mini</div>
                        <div class="quick-ref-item"><span class="badge badge-amber">Grok</span> Instant</div>
                    </div>

                    <div class="tip-box info">
                        <span class="tip-icon">üí°</span>
                        <div><strong>Ativa√ß√£o:</strong> Configura√ß√µes IA ‚Üí "Melhoria de Voz" ‚Üí Ativar + escolher modelo</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üß†</span>
                        <h3 class="card-title">Pensamento Prolongado (Extended Thinking)</h3>
                    </div>
                    <p>Permite que a IA use tempo extra para an√°lises mais profundas. O "thinking" √© configur√°vel <strong>por modelo espec√≠fico</strong>.</p>

                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Budget</th>
                                    <th>Uso</th>
                                    <th>Recomendado para</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>10K tokens</td><td>An√°lise b√°sica</td><td>Casos simples</td></tr>
                                <tr><td>20K tokens</td><td>Balan√ßo ideal</td><td>Maioria dos casos</td></tr>
                                <tr><td>40K tokens</td><td>An√°lise profunda</td><td>Casos complexos</td></tr>
                                <tr><td>64K tokens</td><td>M√°ximo</td><td>Casos muito complexos</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <p style="margin-top: 1rem;"><strong>Suporte por Provider:</strong></p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Provider</th>
                                    <th>Modelos</th>
                                    <th>Thinking</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><strong>Claude</strong></td><td>Sonnet 4, Opus 4.5</td><td><span class="badge badge-green">Configur√°vel</span></td></tr>
                                <tr><td><strong>Gemini</strong></td><td>Flash, Pro</td><td><span class="badge badge-green">Configur√°vel</span></td></tr>
                                <tr><td><strong>OpenAI</strong></td><td>GPT-5.2</td><td><span class="badge badge-purple">Reasoning interno</span></td></tr>
                                <tr><td><strong>Grok</strong></td><td>4.1</td><td><span class="badge badge-amber">Embutido (n√£o configur√°vel)</span></td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="tip-box info">
                        <span class="tip-icon">üìä</span>
                        <div><strong>Log thinking:</strong> Ative em Configura√ß√µes para ver o racioc√≠nio da IA no console. Dispon√≠vel apenas para modelos com thinking configur√°vel.</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìä</span>
                        <h3 class="card-title">T√≥picos por Requisi√ß√£o</h3>
                    </div>
                    <p>Quantos mini-relat√≥rios gerar por chamada √† API:</p>
                    <div class="quick-ref">
                        <div class="quick-ref-item"><strong>1</strong> = Mais requisi√ß√µes, processamento individual</div>
                        <div class="quick-ref-item"><strong>3-5</strong> = Balanceado, recomendado</div>
                        <div class="quick-ref-item"><strong>Todos</strong> = 1 requisi√ß√£o, mais r√°pido</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üîí</span>
                        <h3 class="card-title">Anonimiza√ß√£o</h3>
                    </div>
                    <p>Quando ativada, remove dados sens√≠veis antes de enviar √† IA:</p>
                    <div class="quick-ref">
                        <div class="quick-ref-item">‚úÖ CPF</div>
                        <div class="quick-ref-item">‚úÖ RG</div>
                        <div class="quick-ref-item">‚úÖ PIS/PASEP</div>
                        <div class="quick-ref-item">‚úÖ CTPS</div>
                        <div class="quick-ref-item">‚úÖ Telefones</div>
                        <div class="quick-ref-item">‚úÖ E-mails</div>
                        <div class="quick-ref-item">‚úÖ Dados Banc√°rios</div>
                        <div class="quick-ref-item">‚úÖ N¬∫ Processo</div>
                        <div class="quick-ref-item">‚úÖ Nomes (com NER)</div>
                        <div class="quick-ref-item">‚¨ú Valores R$ (opcional)</div>
                    </div>
                    <div class="tip-box warning">
                        <span class="tip-icon">‚ö†Ô∏è</span>
                        <div>Anonimiza√ß√£o s√≥ funciona com <strong>PDF.js</strong>. N√£o dispon√≠vel com PDF Puro ou Claude Vision.</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìù</span>
                        <h3 class="card-title">Templates Personalizados</h3>
                    </div>
                    <p>Defina a estrutura padr√£o para gera√ß√£o de textos. S√£o <strong>4 templates</strong> configur√°veis:</p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Template</th>
                                    <th>Descri√ß√£o</th>
                                    <th>Quando √© Usado</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Modelo de Mini-Relat√≥rio</strong></td>
                                    <td>Template para os mini-relat√≥rios autom√°ticos de cada t√≥pico</td>
                                    <td>Na extra√ß√£o de t√≥picos e ao regenerar relat√≥rio</td>
                                </tr>
                                <tr>
                                    <td><strong>Modelo de RELAT√ìRIO</strong></td>
                                    <td>Template especial para o t√≥pico RELAT√ìRIO (hist√≥rico processual, partes, datas)</td>
                                    <td>Na gera√ß√£o do relat√≥rio principal da senten√ßa</td>
                                </tr>
                                <tr>
                                    <td><strong>Modelo de Dispositivo</strong></td>
                                    <td>Estrutura da parte dispositiva (verbos em negrito, itens numerados)</td>
                                    <td>Na gera√ß√£o autom√°tica do dispositivo</td>
                                </tr>
                                <tr>
                                    <td><strong>Estilo de Reda√ß√£o</strong></td>
                                    <td>Instru√ß√µes gerais de estilo para toda a reda√ß√£o</td>
                                    <td>Aplicado em todas as gera√ß√µes de texto</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tip-box info">
                        <span class="tip-icon">üí°</span>
                        <div>Os templates podem conter placeholders como <code>[RECLAMANTE]</code>, <code>[RECLAMADA]</code>, <code>[DATA]</code> que ser√£o substitu√≠dos automaticamente.</div>
                    </div>
                </div>

                <!-- NOVO: T√≥picos Complementares Autom√°ticos -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìã</span>
                        <h3 class="card-title">T√≥picos Complementares Autom√°ticos</h3>
                    </div>
                    <p>Ap√≥s a extra√ß√£o de t√≥picos, o sistema pode adicionar automaticamente t√≥picos padr√£o ao final:</p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>T√≥pico</th>
                                    <th>Categoria</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><strong>Honor√°rios Advocat√≠cios</strong></td><td>M√©rito</td><td>Sucumb√™ncia e honor√°rios do advogado</td></tr>
                                <tr><td><strong>Honor√°rios Periciais</strong></td><td>M√©rito</td><td>Responsabilidade pelos custos periciais</td></tr>
                                <tr><td><strong>Juros e Corre√ß√£o Monet√°ria</strong></td><td>M√©rito</td><td>√çndices de corre√ß√£o e taxa de juros</td></tr>
                                <tr><td><strong>Dedu√ß√µes Previdenci√°rias e Fiscais</strong></td><td>M√©rito</td><td>INSS e IRRF sobre as verbas</td></tr>
                                <tr><td><strong>Compensa√ß√£o/Dedu√ß√£o/Abatimento</strong></td><td>M√©rito</td><td>Valores j√° pagos a compensar</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <p style="margin-top: 1rem;"><strong>Configura√ß√£o:</strong> Cada t√≥pico pode ser ativado/desativado individualmente. A ordem pode ser alterada arrastando.</p>
                </div>

                <!-- NOVO: Dashboard de Tokens -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìä</span>
                        <h3 class="card-title">Dashboard de Uso de Tokens</h3>
                    </div>
                    <p>O painel de monitoramento exibe m√©tricas de uso da API:</p>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">üî¢</span>
                            <div class="feature-text">
                                <h4>Total de Tokens</h4>
                                <p>Entrada + Sa√≠da + Cache</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üì°</span>
                            <div class="feature-text">
                                <h4>Requisi√ß√µes</h4>
                                <p>N√∫mero de chamadas √† API</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üíæ</span>
                            <div class="feature-text">
                                <h4>Taxa de Cache</h4>
                                <p>Percentual de reuso (economia)</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üìà</span>
                            <div class="feature-text">
                                <h4>Breakdown</h4>
                                <p>Input, Output, Cache Read/Write</p>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top: 1rem;"><strong>Custo Estimado por Modelo:</strong></p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Modelo</th>
                                    <th>Input</th>
                                    <th>Output</th>
                                    <th>Cache Read</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><strong>Sonnet 4/4.5</strong></td><td>$3.00/1M</td><td>$15.00/1M</td><td>$0.30/1M</td></tr>
                                <tr><td><strong>Opus 4.5</strong></td><td>$5.00/1M</td><td>$25.00/1M</td><td>$0.50/1M</td></tr>
                                <tr><td><strong>Gemini 3 Flash</strong></td><td>$0.50/1M</td><td>$3.00/1M</td><td>$0.05/1M</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tip-box success">
                        <span class="tip-icon">üí∞</span>
                        <div>O sistema usa <strong>cache autom√°tico</strong> para reutilizar contexto entre requisi√ß√µes, economizando 40-50% dos tokens.</div>
                    </div>
                </div>

                <!-- NOVO: Salvamento Autom√°tico -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üíæ</span>
                        <h3 class="card-title">Salvamento Autom√°tico</h3>
                    </div>
                    <p>O sistema salva seu trabalho automaticamente para evitar perda de dados:</p>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Caracter√≠stica</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><strong>Frequ√™ncia</strong></td><td>Salva automaticamente a cada <strong>10 segundos</strong> de inatividade</td></tr>
                                <tr><td><strong>Indicador Visual</strong></td><td>"Auto-salvando..." aparece brevemente na interface</td></tr>
                                <tr><td><strong>Salvamento Manual</strong></td><td><kbd>Ctrl+S</kbd> salva imediatamente</td></tr>
                                <tr><td><strong>Armazenamento</strong></td><td>localStorage (metadados) + IndexedDB (modelos e PDFs)</td></tr>
                                <tr><td><strong>Persist√™ncia</strong></td><td>Dados persistem mesmo ap√≥s fechar o navegador</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="tip-box warning">
                        <span class="tip-icon">‚ö†Ô∏è</span>
                        <div><strong>Aten√ß√£o:</strong> Limpar dados do navegador (Ctrl+Shift+Del) apaga tudo! Exporte backups regularmente.</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚ö°</span>
                        <h3 class="card-title">Prompts R√°pidos</h3>
                    </div>
                    <p>Atalhos pr√©-configurados para o Assistente IA:</p>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">‚öñÔ∏è</span>
                            <div class="feature-text">
                                <h4>Avaliar Decis√£o</h4>
                                <p>An√°lise cr√≠tica da qualidade</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">‚ú®</span>
                            <div class="feature-text">
                                <h4>Sugerir Melhorias</h4>
                                <p>Recomenda√ß√µes de reda√ß√£o</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üîç</span>
                            <div class="feature-text">
                                <h4>Verificar Omiss√µes</h4>
                                <p>Encontra pontos n√£o abordados</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üé§</span>
                            <div class="feature-text">
                                <h4>An√°lise de Prova Oral</h4>
                                <p>Extrai informa√ß√µes de depoimentos</p>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top: 1rem;">Voc√™ pode editar, adicionar ou remover prompts nas configura√ß√µes.</p>
                </div>

                <!-- NOVO: Importar/Exportar Configura√ß√µes -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üì¶</span>
                        <h3 class="card-title">Importar / Exportar Configura√ß√µes</h3>
                    </div>
                    <p>Fa√ßa backup ou transfira suas configura√ß√µes entre navegadores:</p>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">üì§</span>
                            <div class="feature-text">
                                <h4>Exportar</h4>
                                <p>Baixa JSON com: templates, thresholds, prompts r√°pidos, configura√ß√µes de anonimiza√ß√£o</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üì•</span>
                            <div class="feature-text">
                                <h4>Importar</h4>
                                <p>Restaura configura√ß√µes de um backup anterior</p>
                            </div>
                        </div>
                    </div>
                    <p style="margin-top: 1rem;"><strong>Localiza√ß√£o:</strong> Bot√µes no topo do modal de Configura√ß√µes IA</p>
                </div>
            </div>

            <!-- Atalhos Tab -->
            <div id="atalhos" class="tab-content">
                <div class="section-header">
                    <span class="section-icon">‚å®Ô∏è</span>
                    <div>
                        <h2 class="section-title">Atalhos de Teclado</h2>
                        <p class="section-subtitle">Navegue e edite mais r√°pido</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚úèÔ∏è</span>
                        <h3 class="card-title">Editor de Texto</h3>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Atalho</th>
                                    <th>A√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><kbd>Ctrl</kbd> + <kbd>B</kbd></td><td>Negrito</td></tr>
                                <tr><td><kbd>Ctrl</kbd> + <kbd>I</kbd></td><td>It√°lico</td></tr>
                                <tr><td><kbd>Ctrl</kbd> + <kbd>U</kbd></td><td>Sublinhado</td></tr>
                                <tr><td><kbd>Ctrl</kbd> + <kbd>Z</kbd></td><td>Desfazer</td></tr>
                                <tr><td><kbd>Ctrl</kbd> + <kbd>Y</kbd></td><td>Refazer</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üñ•Ô∏è</span>
                        <h3 class="card-title">Navega√ß√£o e Modos</h3>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Atalho</th>
                                    <th>A√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><kbd>Ctrl</kbd> + <kbd>S</kbd></td><td>Salvar (sem fechar)</td></tr>
                                <tr><td><kbd>Ctrl</kbd> + <kbd>F</kbd></td><td>Fullscreen (toggle)</td></tr>
                                <tr><td><kbd>Ctrl</kbd> + <kbd>M</kbd></td><td>Split Mode - Modelos (toggle)</td></tr>
                                <tr><td><kbd>ESC</kbd></td><td>Fechar modal / Sair de modo especial</td></tr>
                                <tr><td><kbd>Alt</kbd> + <kbd>Espa√ßo</kbd></td><td>Abrir sugest√µes de modelos</td></tr>
                                <tr><td><kbd>/</kbd></td><td>Abrir menu de Slash Commands (no chat)</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìã</span>
                        <h3 class="card-title">T√≥picos</h3>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Atalho</th>
                                    <th>A√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td><kbd>‚Üë</kbd> <kbd>‚Üì</kbd></td><td>Mover t√≥pico para cima/baixo</td></tr>
                                <tr><td>N√∫meros <kbd>1</kbd>-<kbd>9</kbd></td><td>Ir para posi√ß√£o espec√≠fica</td></tr>
                                <tr><td>Arrastar</td><td>Reordenar t√≥picos</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- IA Local Tab -->
            <div id="ia-local" class="tab-content">
                <div class="section-header">
                    <span class="section-icon">üß†</span>
                    <div>
                        <h2 class="section-title">IA Local (Offline)</h2>
                        <p class="section-subtitle">Modelos que rodam 100% no navegador</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üîí</span>
                        <h3 class="card-title">Por que usar IA Local?</h3>
                    </div>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <span class="feature-icon">üîê</span>
                            <div class="feature-text">
                                <h4>Privacidade Total</h4>
                                <p>Dados nunca saem do seu navegador</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üí∞</span>
                            <div class="feature-text">
                                <h4>Custo Zero</h4>
                                <p>Sem cobran√ßas por uso de API</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">‚ö°</span>
                            <div class="feature-text">
                                <h4>Instant√¢neo</h4>
                                <p>Respostas em milissegundos</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üì¥</span>
                            <div class="feature-text">
                                <h4>Funciona Offline</h4>
                                <p>Ap√≥s carregar, n√£o precisa de internet</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üë§</span>
                        <h3 class="card-title">Modelo NER (Detec√ß√£o de Nomes)</h3>
                    </div>
                    <p><strong>Finalidade:</strong> Detecta automaticamente nomes de pessoas para anonimiza√ß√£o</p>
                    <p><strong>Uso de RAM:</strong> ~200-300MB quando carregado</p>
                    <div class="steps">
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>Upload dos arquivos do modelo</h4>
                                <p>6 arquivos: config.json, tokenizer.json, tokenizer_config.json, vocab.txt, model_quantized.onnx, ort-wasm.wasm</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>Clique em "Inicializar"</h4>
                                <p>Carrega o modelo na mem√≥ria. Badge fica verde quando pronto.</p>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>Use "Detectar Nomes"</h4>
                                <p>No modal de anonimiza√ß√£o, clique para detectar automaticamente.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üîç</span>
                        <h3 class="card-title">Modelo E5-base (Busca Sem√¢ntica)</h3>
                    </div>
                    <p><strong>Finalidade:</strong> Permite busca por significado em legisla√ß√£o, jurisprud√™ncia e modelos</p>
                    <p><strong>Uso de RAM:</strong> ~400-500MB quando carregado</p>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üìú Embeddings de Legisla√ß√£o</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p>Gere offline com Python: <code>python generate_embeddings.py</code></p>
                                <p>Importe o JSON gerado em Configura√ß√µes IA > Legisla√ß√£o > Importar JSON</p>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üìö Embeddings de Jurisprud√™ncia</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p>Gere offline com Python: <code>python generate_juris_embeddings.py</code></p>
                                <p>Suporta chunking autom√°tico para teses longas (IRR, IAC)</p>
                                <p>Importe o JSON em Configura√ß√µes IA > Jurisprud√™ncia > Importar JSON</p>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üì¶ Embeddings de Modelos</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p>Gere diretamente na interface: Configura√ß√µes IA > Modelos > Gerar Embeddings</p>
                                <p>Ative "Sugest√µes via IA Local" para sugest√µes instant√¢neas sem API</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tip-box success">
                    <span class="tip-icon">üí°</span>
                    <div>
                        <strong>Dica de Performance:</strong> Descarregue modelos n√£o utilizados para liberar mem√≥ria. Os arquivos permanecem salvos no IndexedDB para r√°pida reinicializa√ß√£o.
                    </div>
                </div>

                <!-- Chamadas √† API Claude -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üì°</span>
                        <h3 class="card-title">Chamadas √† API Claude (Custo por Uso)</h3>
                    </div>
                    <p>Estas opera√ß√µes enviam dados √† API Claude e consomem tokens. Entenda o que √© enviado em cada requisi√ß√£o para estimar custos:</p>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üìÑ Extra√ß√£o de T√≥picos</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <ul>
                                    <li>System prompt com instru√ß√µes de formata√ß√£o</li>
                                    <li>Peti√ß√£o inicial completa</li>
                                    <li>Contesta√ß√£o completa</li>
                                    <li>Documentos complementares (se ativado)</li>
                                    <li>Instru√ß√µes para gerar mini-relat√≥rios</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üîç An√°lise de Prova (Contextual)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <ul>
                                    <li>Peti√ß√£o + Contesta√ß√£o + Complementares (cache)</li>
                                    <li>Texto/PDF da prova analisada</li>
                                    <li>Mini-relat√≥rios dos t√≥picos vinculados</li>
                                    <li>Instru√ß√£o customizada (se houver)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üìã An√°lise de Prova (Livre)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <ul>
                                    <li>Apenas a prova</li>
                                    <li>Instru√ß√£o customizada</li>
                                    <li>Opcionalmente: t√≥picos vinculados</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üí° Sugest√µes de Modelos (via API)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <ul>
                                    <li>T√≠tulo + Categoria + Mini-relat√≥rio do t√≥pico</li>
                                    <li>Top 10 modelos candidatos (pr√©-selecionados por TF-IDF)</li>
                                    <li>Instru√ß√£o para ordenar por relev√¢ncia real</li>
                                </ul>
                                <p class="tip" style="margin-top: 10px;">üí° <strong>Dica:</strong> Ative "IA Local" em Configura√ß√µes para sugest√µes gratuitas e offline.</p>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>‚öñÔ∏è Gera√ß√£o de Dispositivo</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <ul>
                                    <li>Todos os t√≥picos selecionados (t√≠tulo, categoria, mini-relat√≥rio, fundamenta√ß√£o, RESULTADO)</li>
                                    <li>Primeiro par√°grafo do relat√≥rio (nomes das partes)</li>
                                    <li>Template de dispositivo (se configurado)</li>
                                    <li>Instru√ß√µes de formata√ß√£o (verbos negrito, itens numerados)</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üîé Revis√£o da Senten√ßa</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p><strong>Op√ß√£o 1:</strong> Apenas decis√£o (Relat√≥rio + Fundamenta√ß√µes + Dispositivo)</p>
                                <p><strong>Op√ß√£o 2:</strong> Decis√£o + Documentos originais</p>
                                <p>System prompt especializado com protocolo 5 fases, exemplos de omiss√µes, contradi√ß√µes e obscuridades</p>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üìö Refinamento de Jurisprud√™ncia</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <ul>
                                    <li>T√≠tulo + Mini-relat√≥rio do t√≥pico</li>
                                    <li>At√© 40 precedentes candidatos (tipo, n√∫mero, tribunal, t√≠tulo, tese resumida)</li>
                                    <li>Instru√ß√£o para selecionar os 10 mais relevantes</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üí¨ Chat / Assistente IA</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <p><strong>Sempre enviado:</strong></p>
                                <ul>
                                    <li>Hist√≥rico da conversa (at√© 20 mensagens)</li>
                                    <li>Contexto do t√≥pico atual (t√≠tulo, mini-relat√≥rio, fundamenta√ß√£o)</li>
                                    <li>Documentos do processo (peti√ß√£o, contesta√ß√£o, complementares)</li>
                                </ul>
                                <p style="margin-top: 10px;"><strong>Provas vinculadas ao t√≥pico:</strong></p>
                                <ul>
                                    <li><strong>Padr√£o:</strong> Nome + An√°lise IA + Conclus√µes do juiz</li>
                                    <li><strong>Com toggle ativado:</strong> + Conte√∫do completo da prova</li>
                                </ul>
                                <p class="tip" style="margin-top: 10px;">‚ö†Ô∏è <strong>Aten√ß√£o:</strong> Os documentos s√£o enviados em toda mensagem do chat. Veja a se√ß√£o "Provas no Assistente IA" na aba Provas para detalhes.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Processamento Local -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üß†</span>
                        <h3 class="card-title">Processamento Local (Gratuito / Offline)</h3>
                    </div>
                    <p>Estas opera√ß√µes rodam 100% no seu navegador, sem enviar dados √† API. Custo zero e funcionam offline:</p>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üí° Sugest√µes de Modelos (IA Local)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <ul>
                                    <li>Gera embedding do t√≥pico (t√≠tulo + categoria + mini-relat√≥rio)</li>
                                    <li>Compara com embeddings pr√©-computados dos modelos</li>
                                    <li>Retorna os 5 mais similares acima do threshold</li>
                                </ul>
                                <p><strong>Requisito:</strong> Modelos precisam ter embeddings (gerados via Python ou ao salvar)</p>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üîç Busca Sem√¢ntica (Legisla√ß√£o)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <ul>
                                    <li>Texto digitado ‚Üí embedding com prefixo "query: "</li>
                                    <li>Compara√ß√£o com embeddings dos artigos (prefixo "passage: ")</li>
                                    <li>Threshold configur√°vel (20-80%)</li>
                                </ul>
                                <p><strong>Requisito:</strong> Arquivo de embeddings importado (JSON do Python)</p>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üîç Busca Sem√¢ntica (Jurisprud√™ncia)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <ul>
                                    <li>Texto digitado ‚Üí embedding com prefixo "query: "</li>
                                    <li>Compara√ß√£o com embeddings das teses (com chunking para teses longas)</li>
                                    <li>Threshold configur√°vel (20-80%)</li>
                                </ul>
                                <p><strong>Requisito:</strong> Arquivo de embeddings importado (JSON do Python)</p>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üîç Busca Sem√¢ntica (Modelos)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <ul>
                                    <li>Texto digitado na busca ‚Üí embedding</li>
                                    <li>Compara√ß√£o com embeddings dos modelos</li>
                                    <li>Toggle üß†/üî§ para alternar entre sem√¢ntico e textual</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header" onclick="toggleCollapsible(this)">
                            <h3>üë§ Detec√ß√£o de Nomes (NER)</h3>
                            <span class="collapsible-arrow">‚ñº</span>
                        </div>
                        <div class="collapsible-content">
                            <div class="collapsible-inner">
                                <ul>
                                    <li>Modelo BERT treinado para portugu√™s</li>
                                    <li>Detecta entidades do tipo PESSOA no texto</li>
                                    <li>Usado na anonimiza√ß√£o autom√°tica</li>
                                </ul>
                                <p><strong>Requisito:</strong> Arquivos do modelo NER carregados em Configura√ß√µes IA</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dicas Tab -->
            <div id="dicas" class="tab-content">
                <div class="section-header">
                    <span class="section-icon">üí°</span>
                    <div>
                        <h2 class="section-title">Dicas e Boas Pr√°ticas</h2>
                        <p class="section-subtitle">Maximize sua produtividade</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚ö°</span>
                        <h3 class="card-title">Performance</h3>
                    </div>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li>Use <strong>PDF.js</strong> em vez de Claude Vision para PDFs nativos (mais r√°pido e gratuito)</li>
                        <li>Configure <strong>"T√≥picos por Requisi√ß√£o"</strong> para 5 ou "Todos" para acelerar</li>
                        <li>Ative <strong>IA Local</strong> para buscas e sugest√µes instant√¢neas</li>
                        <li>Descarregue modelos NER/E5 quando n√£o estiver usando (libera RAM)</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üí∞</span>
                        <h3 class="card-title">Economia de Tokens</h3>
                    </div>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li>Use <strong>"Apenas mini-relat√≥rios"</strong> na an√°lise de provas (menos contexto)</li>
                        <li>Ative <strong>Sugest√µes via IA Local</strong> ‚Äî custo zero para sugest√µes de modelos</li>
                        <li>Use <strong>busca sem√¢ntica local</strong> em vez de refinamento via API</li>
                        <li>O sistema usa <strong>cache de prompts</strong> automaticamente para documentos longos</li>
                        <li>Considere <strong>Grok</strong> para tarefas simples ‚Äî <strong>96% mais barato</strong> que Claude!</li>
                        <li>Use <strong>Gemini Flash</strong> para rascunhos r√°pidos ‚Äî ~50% mais barato que Claude</li>
                        <li>No chat, desative <strong>"Incluir documentos principais"</strong> quando n√£o precisar deles</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üîê</span>
                        <h3 class="card-title">Seguran√ßa de Dados</h3>
                    </div>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li>Ative <strong>Anonimiza√ß√£o</strong> para casos sens√≠veis</li>
                        <li>Use <strong>detec√ß√£o autom√°tica de nomes</strong> (NER local) para n√£o esquecer ningu√©m</li>
                        <li>Modelo NER e busca sem√¢ntica s√£o <strong>100% offline</strong> ‚Äî dados n√£o saem do navegador</li>
                        <li>Exporte projetos regularmente como <strong>backup</strong></li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üìù</span>
                        <h3 class="card-title">Qualidade da Reda√ß√£o</h3>
                    </div>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li>Use <strong>"Revisar Senten√ßa"</strong> antes de finalizar ‚Äî encontra omiss√µes e contradi√ß√µes</li>
                        <li>Configure <strong>templates personalizados</strong> para manter consist√™ncia</li>
                        <li>Use o <strong>versionamento</strong> para experimentar sem medo (üìú restaura vers√µes)</li>
                        <li>Sempre selecione o <strong>resultado correto</strong> antes de gerar dispositivo</li>
                    </ul>
                </div>

                <!-- NOVO: Double Check e Recursos Avan√ßados -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">‚úÖ</span>
                        <h3 class="card-title">Double Check e Recursos Avan√ßados</h3>
                    </div>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li>Ative <strong>Double Check</strong> para casos complexos ou quando quiser certeza extra</li>
                        <li>O Double Check consome tokens adicionais ‚Äî use com modera√ß√£o em tarefas simples</li>
                        <li>O <strong>Estagi√°rio Socr√°tico</strong> est√° sempre ativo ‚Äî a IA pergunta o fundamento quando voc√™ d√° instru√ß√µes vagas</li>
                        <li>D√™ instru√ß√µes completas (ex: "Indefira pela validade dos cart√µes") para a IA redigir direto</li>
                        <li>Use <strong>Confronto de Fatos</strong> para ter vis√£o clara do que √© controverso vs incontroverso</li>
                        <li>O <strong>Ditado por Voz</strong> com melhoria autom√°tica economiza tempo em textos longos</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üóÇÔ∏è</span>
                        <h3 class="card-title">Organiza√ß√£o</h3>
                    </div>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li><strong>Vincule provas</strong> aos t√≥picos corretos para an√°lise contextual precisa</li>
                        <li>Use <strong>categorias</strong> nos modelos para facilitar busca</li>
                        <li>Marque modelos frequentes como <strong>favoritos</strong> (‚≠ê)</li>
                        <li><strong>Exporte modelos</strong> regularmente ‚Äî s√£o sua biblioteca pessoal</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header">
                        <span class="card-icon">üîí</span>
                        <h3 class="card-title">Bloqueio de Abas (Multi-Tab)</h3>
                    </div>
                    <p>O Sentencify usa <strong>localStorage</strong>, que √© compartilhado entre abas do mesmo navegador. Para evitar conflitos:</p>
                    <ul style="margin: 1rem 0; padding-left: 1.5rem;">
                        <li>Apenas <strong>uma aba</strong> pode editar o projeto por vez</li>
                        <li>Se voc√™ abrir o Sentencify em outra aba, ver√° um <strong>overlay de bloqueio</strong></li>
                        <li>Clique em <strong>"Assumir Controle"</strong> para transferir a edi√ß√£o para esta aba</li>
                        <li>A aba anterior ser√° bloqueada automaticamente</li>
                    </ul>
                    <div class="tip-box info">
                        <span class="tip-icon">üí°</span>
                        <div>Isso previne que altera√ß√µes de uma aba sobrescrevam as de outra. Sempre trabalhe em <strong>apenas uma aba</strong> para evitar confus√£o.</div>
                    </div>
                </div>

                <div class="tip-box success">
                    <span class="tip-icon">üéØ</span>
                    <div>
                        <strong>Fluxo Ideal:</strong> Upload ‚Üí An√°lise ‚Üí Refine t√≥picos ‚Üí Vincule provas ‚Üí Edite com sugest√µes ‚Üí Gere dispositivo ‚Üí Revise ‚Üí Exporte!
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
        <button class="mobile-nav-item active" onclick="showTab('intro')">
            <span>üè†</span>
            In√≠cio
        </button>
        <button class="mobile-nav-item" onclick="showTab('upload')">
            <span>üì§</span>
            Upload
        </button>
        <button class="mobile-nav-item" onclick="showTab('topicos')">
            <span>üìã</span>
            T√≥picos
        </button>
        <button class="mobile-nav-item" onclick="showTab('provas')">
            <span>‚öñÔ∏è</span>
            Provas
        </button>
        <button class="mobile-nav-item" onclick="showTab('editor')">
            <span>‚úèÔ∏è</span>
            Editor
        </button>
        <button class="mobile-nav-item" onclick="showTab('juris')">
            <span>üìñ</span>
            Juris
        </button>
        <button class="mobile-nav-item" onclick="showTab('legis')">
            <span>üìú</span>
            Legis
        </button>
        <button class="mobile-nav-item" onclick="showTab('modelos')">
            <span>üì¶</span>
            Modelos
        </button>
        <button class="mobile-nav-item" onclick="showTab('config')">
            <span>‚öôÔ∏è</span>
            Config
        </button>
    </nav>

    <script>
        // Tab Navigation
        function showTab(tabId) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            // Remove active from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.mobile-nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabId).classList.add('active');

            // Activate nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.onclick && item.onclick.toString().includes(tabId)) {
                    item.classList.add('active');
                }
            });
            document.querySelectorAll('.mobile-nav-item').forEach(item => {
                if (item.onclick && item.onclick.toString().includes(tabId)) {
                    item.classList.add('active');
                }
            });

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Theme Toggle
        function toggleTheme() {
            document.body.classList.toggle('light-theme');
            localStorage.setItem('theme', document.body.classList.contains('light-theme') ? 'light' : 'dark');
        }

        // Load saved theme
        if (localStorage.getItem('theme') === 'light') {
            document.body.classList.add('light-theme');
        }

        // Collapsible sections
        function toggleCollapsible(header) {
            const collapsible = header.parentElement;
            collapsible.classList.toggle('open');
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                // Close any open collapsibles
                document.querySelectorAll('.collapsible.open').forEach(c => {
                    c.classList.remove('open');
                });
            }
        });
    </script>
</body>
</html>
